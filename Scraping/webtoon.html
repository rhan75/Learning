


















































<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta property="title" content="경이로운 소문">
	<meta property="description" content="영원불멸의 삶을 위해 지구로 내려온 사후세계 악한 영혼들. 그들을 잡는 카운터들의 이야기.">
	<meta property="og:title" content="경이로운 소문">
    <meta property="og:image" content="http://t1.daumcdn.net/webtoon/op/7a14847c455ff094315e508c2845e2273d316db7">
    <meta property="og:description" content="영원불멸의 삶을 위해 지구로 내려온 사후세계 악한 영혼들. 그들을 잡는 카운터들의 이야기.">
        <meta property="og:site_name" content="Daum 웹툰">
			<meta property="og:url" id="ogUrl" content="http://webtoon.daum.net/webtoon/view/AmazingRumor">
		<meta property="og:type" content="website">

	<meta name="google-site-verification" content="eIXFx7xW9i-ILPA5sFkGw9t2O8xyctRXcstOygB_s-A" />

	<title>경이로운 소문 | Daum 웹툰</title>
	<link rel="shortcut icon" href="http://s1.daumcdn.net/photo-section/-cartoon10/favicon/201312/favicon.ico">
	<link href="https://t1.daumcdn.net/webtoon/cssjs/20210125101038/common.css" type="text/css" rel="stylesheet">
	<!--[if lt IE 9]>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/jquery/jquery-1.11.0.min.js"></script>
	<![endif]-->
	<!--[if gte IE 9]><!-->
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/jquery/jquery-2.1.1.min.js"></script>
	<!--<![endif]-->
	<script type="text/javascript" src="http://t1.daumcdn.net/cartoon/cssjs/underscore/underscore-1.8.3.min.js"></script>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/backbone/backbone-1.1.2.min.js"></script>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/jquery/plugin/jquery.cookie-1.4.0.min.js"></script>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/pcsocialshare/pcSocialshare-1.5.3.min.js"></script>
	<script type="text/javascript">
		document.domain = "daum.net";
	</script>
	<script type="text/javascript" src="//t1.daumcdn.net/tiara/js/v1/tiara.min.js"></script>
	<script type="text/javascript">
		var WEBTOON_CONFIG = {
			svcDomain: "webtoon.daum.net",
			enableHash: true,
							deployment: "production"
					}

		TiaraTracker.getInstance().init(WEBTOON_CONFIG).setAutoClick(true);
	</script>

	<!-- Facebook Pixel Code -->
	<script>
		!function(f,b,e,v,n,t,s)
		{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
			n.callMethod.apply(n,arguments):n.queue.push(arguments)};
			if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
			n.queue=[];t=b.createElement(e);t.async=!0;
			t.src=v;s=b.getElementsByTagName(e)[0];
			s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '621472821375349');
		fbq('track', 'PageView');
	</script>
	<noscript>
		<img height="1" width="1" src="https://www.facebook.com/tr?id=621472821375349&ev=PageView&noscript=1" />
	</noscript>
	<!-- End Facebook Pixel Code -->

</head>
<body>
<div id="daumIndex">
	<a href="#daumGnb" rel="bookmark" class="service_bookmark">웹툰 메뉴  바로가기</a>
	<a href="#daumContent" rel="bookmark" class="service_bookmark">웹툰 내용  바로가기</a>
</div>
<!-- //daumIndex -->
<div id="daumWrap" class="daum_webtoon">
	<div id="daumHead">
		<div class="clear_g inner_head">
			<h1 class="#gnb #webtoon">
				<a href="/" id="daumServiceLogo">
					<span class="ir_wa">WEBTOON</span>
				</a>
			</h1>
			<h2 class="screen_out">웹툰 메인메뉴</h2>
			<div id="daumGnb">
				<ul class="gnb_webtoon">
					<li class="gnb_ranking #gnb #ranking">
						<a href="/ranking" class="gnb_comm">
							<span class="ir_wa">랭킹</span>
						</a>
					</li>
					<li class="gnb_league #gnb #league">
						<a href="/league" class="gnb_comm">
							<span class="ir_wa">웹툰리그</span>
						</a>
					</li>
					<li class="gnb_my #gnb #my">
						<a href="/my/coupon" class="gnb_comm">
							<span class="ir_wa">MY</span>
                            <span class="ico_comm ico_new">NEW</span>
						</a>
					</li>
				</ul>
			</div>
			<h2 class="screen_out">최근 본 웹툰</h2>
			<div class="recent_view">
				<button type="button" class="btn_comm btn_recent #gnb #recently">최근본</button>
				<div class="recent_layer">
					<div class="cont_recently">
						<strong class="tit_comm tit_recent">Recently viewed</strong>
						<ul id="recentList" class="list_recently"></ul>
					</div>
				</div>
				<div class="dimmed"></div>
				<button type="button" class="btn_comm btn_close">닫기</button>
			</div>
			<h2 class="screen_out">검색</h2>
			<form action="#" class="tf_search" id="searchForm" autocomplete="off">
				<fieldset class="fld_inside">
					<legend class="screen_out">검색어 입력폼</legend>
					<div class="box_search">
						<span class="ico_comm ico_round_start"></span>
						<button type="button" class="ico_comm btn_open" id="searchOpenBtn">검색창 열기</button>
						<label class="screen_out" for="searchKeyword">검색어 입력</label><!-- input id 와 for label 값 동일하게 맞춰주세요.-->
                        <input type="text" id="searchKeyword" class="inp_keyword" maxlength="30">
						<button type="button" class="btn_comm btn_delete">지우기</button>
						<button type="submit" class="ico_comm btn_search #gnb #search_bar">검색</button>
						<span class="ico_comm ico_round_end"></span>
					</div>
					<div class="box_suggest" id="suggestBox">
						<ul class="list_thumb"></ul>
						<ul class="list_keyword"></ul>
						<div class="recent_search">
							<strong class="tit_recent">최근검색어</strong>
							<ul class="list_recent">
							</ul>
							<div class="group_option">
								<button type="button" class="btn_option btn_opt_off">기능끄기</button>
								<span class="ico_comm ico_bar">|</span>
								<button type="button" class="btn_option btn_opt_del">전체삭제</button>
							</div>
						</div>
						<div class="edge_bottom"></div>
					</div>
				</fieldset>
			</form>
		</div>
	</div>

	<!-- //daumHead -->
<script type="text/template" id="recentListTemp">
<li>
	<a href="/<%= type == 'webtoon' ? 'webtoon' : 'league' %>/viewer/<%= id %>" class="link_wt ?c_id=<%= id %>">
		<img src="<%= thumbnailImage %>" width="152" height="90" class="img_thumb" alt="<%= title + '' + episodeTitle %>">
		<span class="thumb_cover"></span>
		<strong class="tit_wt"><% if(type=='leaguetoon'){ %><span class="ico_comm ico_league">리그</span><% } else if(ageGrade==19){ %><span class="ico_comm ico_adult">성인</span><% } %><%= title %></strong>
		<span class="txt_info"><%= episodeTitle %></span>
	</a>
	<button type="button" class="btn_comm btn_delete">삭제</button>
</li>
</script>
<script type="text/template" id="suggestBoxTemp">
<% var key = decodeURIComponent(key); %>
<ul class="list_thumb">
	<% _.each(list, function(item){ %>
		<% if(_.has(item, 'thumbnailImage')){ %>
		<% var matchText = item.keyword.replace(key,'<strong class="txt_match">'+key+'</strong>'); %>
			<li>
				<a href="/webtoon/view/<%= item.nickname %>" class="link_suggest">
					<img src="<%= item.thumbnailImage %>" width="64" height="46" class="img_thumb" alt="<%= item.title %>">
					<span class="thumb_cover"></span>
					<span class="desc_wt"><%= matchText %> <span class="txt_writer"><span class="screen_out">작가</span><%= item.artist %></span></span>
				</a>
			</li>
		<% } %>
	<% }) %>
</ul>
<ul class="list_keyword">
	<% _.each(list, function(item){ %>
		<% if(!_.has(item, 'thumbnailImage')){ %>
		<% var matchText = item.keyword.replace(key,'<strong class="txt_match">'+key+'</strong>'); %>
			<li>
				<a href="/search/total?q=<%= item.keyword %>" class="link_suggest link_suggest_search" data-query="<%= item.keyword %>"><%= matchText %></a>
			</li>
		<% } %>
	<% }) %>
</ul>
<div class="recent_search">
	<strong class="tit_recent">최근검색어</strong>
	<ul class="list_recent">
		<% _.each(recentKey,function(item){ %>
			<% if(item!=''){ %>
				<% if(recentUse=='off'){ %>
		<li style="display:none">
				<% } else { %>
		<li>
				<% } %>
			<a href="/search/total?q=<%= encodeURIComponent(item) %>" class="link_suggest link_suggest_search" data-query="<%= item %>"><%= item.replace(/</gi,'&lt;').replace(/>/gi,'&gt;') %></a>
			<button type="button" class="btn_comm btn_delete">삭제</button>
		</li>
			<% } %>
		<% }) %>
	</ul>
	<div class="group_option">
		<% if(recentUse=='off'){ %>
		<button type="button" class="btn_option btn_opt_on">기능켜기</button>
		<% } else { %>
		<button type="button" class="btn_option btn_opt_off">기능끄기</button>
		<% } %>
		<span class="ico_comm ico_bar">|</span>
		<button type="button" class="btn_option btn_opt_del">전체삭제</button>
	</div>
</div>
<div class="edge_bottom"></div>
</script>

<div id="daumContent">
	<h2 class="screen_out">작품 홈 본문</h2>
	<div id="cSub" class="product_intro"></div>
	<div id="cMain">
		<div class="cont_update" id="episodeList">
			<h3 class="tit_update" style="display:none">
				매주 <em class="emph_day"></em> 연재
				<span class="ico_comm ico_bar el_preview">|</span>
				<span class="txt_update el_preview">미리보기는 연재 예정일 보다 빠르게 볼 수 있는 <em class="emph_update">유료 상품</em>입니다.</span>
			</h3>

						<div class="undimmed_layer popup_gidamoo" style="display:none;top:0"></div>
			<div class="post_layer popup_gidamoo" style="display:none;">
				<div class="inner_post_layer" style="margin-top:120px">
				</div>
			</div>

						<div class="undimmed_layer popup_gidamoo_pay" style="display:none;top:0"></div>
			<div class="post_layer popup_gidamoo_pay" style="display:none;">
				<div class="inner_post_layer" style="margin-top:120px">
					<div class="layer_body"></div>
					<a href="#none" class="btn_close"><span class="ico_comm ico_close">닫기</span></a>
                    <div class="box_agree">
						<div class="inner_btn">
                            <button type="button" class="btn_comm btn_cancel">취소</button>
                            <button type="button" class="btn_comm btn_agree">확인</button>
						</div>
                    </div>
				</div>
			</div>

			<div class="sort_comm">
				<strong class="screen_out">웹툰 정렬순서 선택</strong>
				<span class="item_radio">
					<input type="radio" id="sortRecent" name="wtsort" class="inp_radio">
					<label for="sortRecent" class="label_radio">최신화부터</label>
					<span class="ico_comm ico_check"></span>
				</span>
				<span class="ico_comm ico_bar"></span>
				<span class="item_radio">
					<input type="radio" id="sortOld" name="wtsort" class="inp_radio"> <label for="sortOld" class="label_radio">첫화부터</label> <span class="ico_comm ico_check"></span>
				</span>
			</div>

			<div class="prod_info" style="display:none">
				<div class="info_prod">
					<span class="desc_guide" id="intervalGuideText" style="display:none"><span class="ico_dot"></span><span class="txt_guide">매주 <span class="num_count">2</span>회 무료</span></span>
					<span class="desc_guide" id="previewGuideText" style="display:none"><span class="ico_dot"></span><span class="txt_guide">미리보기 유료</span></span>
					<span class="desc_guide" id="payGuideText" style="display:none"><span class="ico_dot"></span><span class="txt_guide">지난분량 유료</span></span>
					<span class="desc_guide" id="payDescGuide" style="display:none"><span class="ico_dot"></span><span class="txt_guide">유료 상품만 표시되며, 구매할 분량을 선택 및 취소할 수 있습니다.</span></span>
				</div>
				<div class="util_prod">
					<button type="button" class="btn_stype1" id="allBuyBtn" style="display:none">전체구매</button>
					 <button type="button" class="btn_stype1" id="allChoiceBtn" style="display:none">전체선택</button>
					 <button type="button" class="btn_stype2" id="choiceCancelBtn" style="display:none">선택취소</button>
				</div>
			</div>
			<div id="noticeTitle" class="prod_info" style="display:none"></div>

			<ul class="clear_g list_update"></ul>
			<div class="paging_number"></div>
			<div class="pay_webtoon" id="payBar"></div>
			<div class="pay_webtoon" id="payBar2" style="display:none"></div>
		</div>
		<div class="cont_related" id="promotionContent"></div>
		<div class="cont_recommend">
			<div class="other_product #title #other_title" id="otherProduct"></div>
			<div class="add_banner">
				<h3 class="screen_out">프로모션 배너</h3>
				<div class="banner">
					<ins class="kakao_ad_area"
						 style="display: block; position: relative;"
						 data-ad-param-channel="daum_webtoon"
						 data-ad-unit="DAN-1ibh3j28w741g"
						 data-ad-type="D"
						 data-ad-width="250"
						 data-ad-height="250"></ins>
				</div>
			</div>
		</div>
				<div class="wing_banner #title #right_bnr" id="viewWingBnr"></div>
	</div>
	<div id="cEtc">
		<div id="noticeList" class="cont_notice"></div>
		<div class="bottom_banner" id="botBnr"></div>
	</div>
	<iframe id="clickIframe" style="display:none"></iframe>
	<iframe id="saveViewerFrame" style="display:none"></iframe>

	<div class="dimmed_layer layer_pay_agree" style="display:none"></div>
    <div id="payAgreeArea" style="display:none" class="payment_terms"></div>
</div>



<script type="text/template" id="cSubTemp">
<%
	//작품정보
	var genres = '';
	var isNew = false;
    var isMulti = false;
	var isSpecial = false;
	var commentUpdatedDate = '';
	var title = webtoon.title;

	var maxNum = 11;
	if(title.length>maxNum){
		var title1 = title.substr(0,maxNum);
		var title2 = title.substr(maxNum,title.length-maxNum);
		var title3 = title1;
		var title4 = '';
		var position = title1.lastIndexOf(' ');

		if(position>0){
			title3 = title1.substr(0,position) + '<br>';
			title4 = title1.substr(position,maxNum-position);
		};
		var title = title3 + title4 + title2;
	};
	_.each(webtoon.cartoon.genres, function(g){
		genres += ', <a class="link_genre" href="/search/total?q=%23'+encodeURIComponent(g.name)+'">' + g.name + '</a>';
	});
	if(webtoon.cartoon.categories.length>0){
		genres += ', <a class="link_genre" href="/search/total?q=%23'+encodeURIComponent(webtoon.cartoon.categories[0].name)+'">'+webtoon.cartoon.categories[0].name+'</a>';
		if(webtoon.cartoon.genres.length == 1 && webtoon.cartoon.categories.length>1){
            genres += ', <a class="link_genre" href="/search/total?q=%23'+encodeURIComponent(webtoon.cartoon.categories[1].name)+'">'+webtoon.cartoon.categories[1].name+'</a>';
		};
	};
	genres = genres.replace(',','');

	if(webtoon.viewerType == 'multi' || webtoon.viewerType == 'chat'){
		isMulti = true;
    };
	if(webtoon.webtoonType == 'campaign'){
		isSpecial = true; 	};

	var score = Math.round(webtoon.averageScore*10)/10;

	//작가정보
	var isOnly = false;
	var artist1 = webtoon.cartoon.artists[0] || '';
	var artist2 = webtoon.cartoon.artists[1] || '';

	var getHomepage = function(artistNum){
		var artistNum = artistNum || artist2;
		return _.find([artistNum.homepage],function(str){return (str!=null && str!='')});
	};
	if(artist1.id == artist2.id){
		isOnly = true;
	};
	if(artistComment){
		var updateDay = util.yyyymmddToDate(artistComment.dateCreated);
		var period = util.getPeriod(updateDay);
		commentUpdatedDate = artistComment.dateCreated.substr(0,4)+'.'+artistComment.dateCreated.substr(4,2)+'.'+artistComment.dateCreated.substr(6,2);
		if(period<7){
			isNew = true;
		};
	};

	var pcHomeImage = webtoon.pcHomeImage;
	var pcHomeRightImage = webtoon.pcHomeRightImage || {url : 'http://t1.daumcdn.net/cartoon/5524F34C020A640002'};
	var pcHomeLeftColor = webtoon.pcHomeLeftColor || 'ea5b48';
	var pcHomeRightColor = webtoon.pcHomeRightColor || 'F27362';
%>

	<div class="product_info" style="background-color:#<%= pcHomeLeftColor %>">
		<div class="inner_product">
			<div class="desc_product">
				<h3 class="web_font tit_product"><%= title %></h3>
				<dl class="list_info">
					<dt class="screen_out">장르</dt>
					<dd class="txt_genre">
					<% if(isSpecial){ %>
					<em class="ico_comm ico_campaign">캠페인</em>
					<% } %>
					 <%= genres %>
					</dd>
					<dt class="screen_out">작품 내용</dt>
					<% if(webtoon.introduction){ %>
					<dd class="txt_story"><%= webtoon.introduction.replace('&amp;amp;lt;','<').replace('&amp;amp;gt;','>') %></dd>
					<% } else { %>
					<dd class="txt_story">&nbsp;</dd>
					<% } %>
				</dl>
				<strong class="screen_out">사용자 이용 영역</strong>
				<ul class="clear_g list_append">
									<li class="box_grade">
						<span class="screen_out">현재 별점</span>
						<em class="emph_grade"><%= score %></em>
						<button type="button" class="btn_comm btn_grade">별점주기</button>
						<div class="bg_comm layer_regist">
							<strong class="screen_out">아래 별점을 클릭 또는 드래그 해주세요.</strong>
							 <span class="bg_comm vote_star">
							 	<span class="bg_comm inner_star" style="width:0%"></span>
							 </span>
							<em class="num_grade">0.0</em>
						</div>
						<div class="bg_comm layer_vote">
							<p class="txt_complete">평점이 등록되었습니다.</p>
						</div>
					</li>
									<li class="box_like">
						<% if(cabinetId){ %>
						<button type="button" class="btn_comm btn_like on">찜하기 취소</button>
						<div class="bg_comm layer_like">
							<p class="txt_complete">찜이 해제되었습니다.</p>
						</div>
						<% } else { %>
						<button type="button" class="btn_comm btn_like">찜하기</button>
						<div class="bg_comm layer_like">
							<p class="txt_complete">찜이 MY에 등록되었습니다.</p>
						</div>
						<% } %>
					</li>
					<li class="box_share">
						<button type="button" class="btn_comm btn_share">공유하기</button>
						<div class="layer_share">
							<div class="bg_comm inner_share">
								<strong class="tit_share">공유하기</strong>
								<span class="txt_share">친구와 함께 공유해서 보세요</span>
<style type="text/css">
.sns_comm {float:none}
.no_more .sns_comm_b .share_sns_type1 {width:auto;height:auto;text-align:center}
.sns_comm .frame_sns {float:none}
.sns_comm_b .share_sns_type1 .frame_sns .link_sns {display:inline-block;overflow:hidden;float:none;width:70px;height:70px;margin:0 6px;text-indent:0;font-size:0;line-height:0}
.sns_comm_b .frame_sns .img_g {display:none}
</style>
								<div id="socialShareContainer" class="item_btn"></div>
								<button type="button" class="btn_comm btn_close">닫기</button>
							</div>
						</div>
					</li>
				</ul>
				<a href="#none" class="btn_comm link_go" id="intervalLink"></a>
			</div>
			<% if(pcHomeImage!==''){ %>
			<img src="<%= pcHomeImage.url %>" width="664" height="390" class="img_thumb" alt="<%= webtoon.title %>">
			<% } %>
		</div>
	</div>
	<div class="writer_info" style="background:#<%= pcHomeRightColor %> url(<%= pcHomeRightImage.url %>) no-repeat">
		<div class="inner_writer">
			<strong class="screen_out">작가 정보</strong>
		<% if(isOnly){ %>
			<dl class="list_writerinfo">
				<dt class="screen_out">작가sns</dt>
				<dd class="writer_sns">
				<% if(artist2.email){ %>
					<a href="#none" target="_blank" class="btn_comm link_mail" data-mail="<%= artist2.email %>">메일</a>
				<% } else { %>
					<span class="btn_comm link_mail">메일</span>
				<% } %>
				<% if(_.isUndefined(getHomepage(artist2))){ %>
					<span class="btn_comm link_sns">SNS</span>
				<% } else { %>
					<a href="<%= getHomepage() %>" target="_blank" class="btn_comm link_sns">SNS</a>
				<% } %>
					<div class="email_layer" style="display:none;left:-339px;top:102px">
						<div class="inner_email_layer inner_email_layer1">
							<div class="layer_body">
								<strong class="tit_email"><span class="bg_bar"></span>작가_이메일</strong>
								<span class="desc_email"></span>
							</div>
							<div class="layer_foot">
								<button type="button" class="btn_comm btn_close">닫기</button>
							</div>
						</div>
					</div>
				</dd>
				<dt class="screen_out">작가의 프로필 사진</dt>
				<dd class="item_profile">
					<div class="panel_profile">
						<img src="<%= artist2.pictureImage?artist2.pictureImage.url:webtoon.thumbnailImage2.url %>" width="114" height="114" class="img_profile" alt="<%= artist2.penName %> 사진">
					</div>
				</dd>
				<dt class="screen_out">작가명</dt>
				<dd class="txt_writer"><a href="/search/total?q=<%= encodeURIComponent(artist2.penName) %>" class="link_search"><%= artist2.penName %></a></dd>
				<dt class="screen_out">작가의 말</dt>
				<dd class="writer_message">
					<span class="ico_comm ico_bar"></span>
				<% if(artistComment){ %>
					<span class="inner_message">
						<a href="#none" class="link_message">
							<span class="marks_start">“</span><span class="txt_message"><%= artistComment.title %></span><span class="marks_end">”</span>
							<% if(isNew && !isArtistCommentAuth){ %>
							<em class="ico_new">new</em>
							<% } %>
						</a>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<dt class="screen_out">업데이트 날짜</dt>
				<dd class="txt_date"><%= commentUpdatedDate %></dd>
				<% } else { %>
					<span class="inner_message">
						<span class="link_message">
							<span class="txt_message txt_empty">작가의 말이 없습니다.</span>
						</span>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<% } %>
				<dd class="writer_mask" style="background:url(<%= pcHomeRightImage.url %>) no-repeat"></dd>
			</dl>
		<% } else { %>
			<dl class="list_writerinfo two_writer">
				<dt class="screen_out">작가sns</dt>
				<dd class="writer_sns">
					<strong class="writer_name">
						<span class="txt_writer">글: <a href="/search/total?q=<%= encodeURIComponent(artist2.penName) %>" class="link_search"><%= artist2.penName %></a></span>
					</strong>
					<% if(artist2.email){ %>
						<a href="#none" target="_blank" class="btn_comm link_mail" data-mail="<%= artist2.email %>">메일</a>
					<% } else { %>
						<span class="btn_comm link_mail">메일</span>
					<% } %>
					<% if(_.isUndefined(getHomepage(artist2))){ %>
						<span class="btn_comm link_sns">SNS</span>
					<% } else { %>
						<a href="<%= getHomepage(artist2) %>" target="_blank" class="btn_comm link_sns">SNS</a>
					<% } %>
					<div class="email_layer" style="display:none;left:-339px;top:102px">
						<div class="inner_email_layer inner_email_layer1">
							<div class="layer_body">
								<strong class="tit_email"><span class="bg_bar"></span>작가_이메일</strong>
								<span class="desc_email"></span>
							</div>
							<div class="layer_foot">
								<button type="button" class="btn_comm btn_close">닫기</button>
							</div>
						</div>
					</div>
				</dd>
				<dd class="writer_sns">
					<strong class="writer_name">
						<span class="txt_writer">그림: <a href="/search/total?q=<%= encodeURIComponent(artist1.penName) %>" class="link_search"><%= artist1.penName %></a></span>
					</strong>
					<span class="ico_comm ico_bar"></span>
					<% if(artist1.email){ %>
						<a href="#none" target="_blank" class="btn_comm link_mail" data-mail="<%= artist1.email %>">메일</a>
					<% } else { %>
						<span class="btn_comm link_mail">메일</span>
					<% } %>
					<% if(_.isUndefined(getHomepage(artist1))){ %>
						<span class="btn_comm link_sns">SNS</span>
					<% } else { %>
						<a href="<%= getHomepage(artist1) %>" target="_blank" class="btn_comm link_sns">SNS</a>
					<% } %>
				</dd>
				<dt class="screen_out">작가의 프로필 사진</dt>
				<dd class="item_profile">
					<div class="panel_profile">
						<div class="inner_profile" style="left:0;width:228px">
							<img src="<%= artist2.pictureImage?artist2.pictureImage.url:webtoon.thumbnailImage2.url %>" width="114" height="114" class="img_profile" alt="<%= artist2.penName %> 사진">
							<img src="<%= artist1.pictureImage?artist1.pictureImage.url:webtoon.thumbnailImage2.url %>" width="114" height="114" class="img_profile" alt="<%= artist1.penName %> 사진">
						</div>
					</div>
					<button type="button" class="btn_comm btn_prev" style="display:none">이전 작가</button>
					<button type="button" class="btn_comm btn_next">다음 작가</button>
				</dd>
				<dt class="screen_out">작가의 말</dt>
				<dd class="writer_message">
				<% if(artistComment){ %>
					<span class="inner_message">
						<a href="#none" class="link_message">
							<span class="marks_start">“</span><span class="txt_message"><%= artistComment.title %></span><span class="marks_end">”</span>
							<% if(isNew && !isArtistCommentAuth){ %>
							<em class="ico_new">new</em>
							<% } %>
						</a>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<dt class="screen_out">업데이트 날짜</dt>
				<dd class="txt_date"><%= commentUpdatedDate %></dd>
				<% } else { %>
					<span class="inner_message">
						<span class="link_message">
							<span class="txt_message txt_empty">작가의 말이 없습니다.</span>
						</span>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<% } %>
				<dd class="writer_mask" style="background:url(<%= pcHomeRightImage.url %>) no-repeat"></dd>
			</dl>
		<% } %>
		</div>
		<div class="dimmed_layer edit_article" style="display:none"></div>
		<div class="layer_edit edit_article" style="display:none">
			<div class="layer_body">
				<form action="#" id="artistCommentForm">
					<fieldset>
						<legend class="screen_out">작가의 말 등록</legend>
						<div class="item_writer">
							<span class="ico_bar"></span>
							<label for="writerTitle" class="label_writer">작가의 말</label><em class="emph_limit">(20자 이내)</em>
							<span class="desc_guide">제목을 입력하세요..</span>
							<input type="text" id="writerTitle" class="inp_message inp_edit">
						</div>
						<div class="item_writer">
							<span class="ico_bar"></span>
							<label for="writerContent" class="label_writer">내용</label><em class="emph_limit">(200자 이내)</em>
							<span class="desc_guide">내용을 입력하세요..</span>
							<textarea id="writerContent" class="tf_message inp_edit" cols="30" rows="10"></textarea>
						</div>
						<div class="item_btn">
							<button type="button" class="btn_comm btn_delete">삭제</button>
							<button type="submit" class="btn_comm btn_submit">수정</button>
						</div>
					</fieldset>
				</form>
			</div>
			<div class="layer_foot">
				<a href="#none" class="btn_comm btn_close">닫기</a>
			</div>
		</div>
		<% if(artistComment){ %>
		<div class="layer_message">
			<div class="dimmed"></div>
			<div class="writer_message">
				<strong class="tit_message"><%= artistComment.title %></strong>
				<p class="txt_message">
					<%= artistComment.content.replace(/</gi,'&lt;').replace(/>/gi,'&gt;').replace(/\n/gi,'<br>') %>
				</p>
				<span class="txt_date"><%= commentUpdatedDate %></span>
			</div>
			<button type="button" class="btn_comm  btn_close">닫기</button><
		</div>
		<% } %>
	</div>
</script>
<script type="text/template" id="episodeListTemp">
<%
var year = dateCreated?dateCreated.substr(0,4):'';
var month = dateCreated?dateCreated.substr(4,2):'';
var day = dateCreated?dateCreated.substr(6,2):'';
var update = year + '.' + month + '.' + day;
var isMulti = false;
var isPreview = false;
var previewUpdate = '';
var shareCount = 0;
var now = new Date();
var isInterval = isInterval || false;
var isGidamoo = false;
var hasTicket = false;

if(webtoonModel.get('webtoon').viewerType == 'multi' || webtoonModel.get('webtoon').viewerType == 'chat'){
	isMulti = true;
};
if(webtoonModel.get('webtoon').gidamoo && webtoonModel.get('webtoon').gidamoo.id){
	isGidamoo = true;
};
if(false && webtoonModel.get('ticketUserData') && webtoonModel.get('ticketUserData').available){
	hasTicket = true;
};
if(isMulti && shareVoteTarget && shareVoteTarget.voteCount>0){
	shareCount = shareVoteTarget.voteCount;
};
if(serviceType && serviceType.indexOf('preview')>-1){
	isPreview = true;
};
if(previewEndDate){
    previewUpdate = util.getPreviewRemainTime(previewEndDate) + ' 후 ';
};
%>

<% if(isPreview){ %>
	<a href="/webtoon/viewer/<%= id %>" class="link_wt <%= isPaid?'link_paid':'link_pay_wt' %>" data-id="<%= id %>">
    <span class="thumb_g">
        <img src="<%= (episodeImage && !isPaid)?episodeImage.url:thumbnailImage.url %>" width="186" height="112" class="img_thumb" alt="<%= title %>">
    </span>
	<span class="thumb_cover"></span>
	<span class="ico_comm ico_preview"></span>
	<span class="stat_choice">
        <span class="bg_choice"></span>
        <span class="ico_comm ico_choice"></span>
    </span>
	<span class="stat_classify">
        <span class="ico_comm ico_choice"></span>
    </span>
	<strong class="tit_wt"><%= title %></strong>
</a>
<% } else if(isInterval) { %>
	<a href="/webtoon/viewer/<%= id.replace('interval_','') %>" class="link_wt">
	<span class="thumb_g"><img src="<%= thumbnailImage.url %>" width="186" height="112" class="img_thumb" alt="<%= title %>"></span>
	<span class="thumb_cover"></span>
	<span class="ico_comm ico_free"></span>
	<span class="stat_choice">
		<span class="bg_choice"></span>
		<span class="ico_comm ico_choice"></span>
	</span>
	<span class="stat_classify">
		<span class="ico_comm ico_choice"></span>
	</span>
	<strong class="tit_wt"><%= title %></strong>
	<span class="info_go">
		<span class="txt_go">무료 회차 바로보기</span>
		<span class="ico_comm ico_go"></span>
	</span>
</a>
<% } else { %>
	<a href="/webtoon/viewer/<%= id %>" class="link_wt <%= (serviceType=='pay' && price>0 && !isPaid)?'link_pay_wt':'' %> <% if(isPaid){ %>link_paid<% } %>" data-id="<%= id %>">
	<img src="<%= thumbnailImage.url %>" width="186" height="112" class="img_thumb" alt="<%= title %>">
	<span class="thumb_cover"></span>
	<span class="stat_choice">
        <span class="bg_choice"></span>
        <span class="ico_comm ico_choice"></span>
    </span>
	<span class="stat_classify">
        <span class="ico_comm ico_choice"></span>
    </span>
	<strong class="tit_wt"><%= title %></strong>
</a>
<% } %>

<% if(!isInterval){ %>
<div class="desc_info">
    <% if(serviceType.indexOf('preview')>-1){ %>
		<% if(!isPaid){ %>
    	<span class="txt_price"><span class="screen_out">가격 </span>₩<%= util.addComma(price) %></span>
    	<span class="ico_comm ico_bar">|</span>
		<% } else { %>
        <span class="txt_price" style="color:#868686">구매한 상품</span>
        <span class="ico_comm ico_bar">|</span>
        <% } %>
    <% } %>
	<% if(serviceType.indexOf('pay')>-1 && price>0){ %>
		<% if(serviceType=='pay_finished'){ %>
		<span class="txt_share"><span class="screen_out">가격 </span>판매종료</span>
        <% } else if(isPaid) { %>
        <span class="txt_price" style="color:#868686">구매한 상품</span>
        <% } else if(isGidamoo && hasTicket && ticketAvailable) { %>
        <span class="txt_price" style="color:#6853e7">이용권</span>
        <% } else if(hasTicket && ticketAvailable) { %>
        <span class="txt_price">이용권</span>
		<% } else { %>
		<span class="txt_price"><span class="screen_out">가격 </span>₩<%= util.addComma(price) %></span>
		<% } %>
        <span class="ico_comm ico_bar">|</span>
	<% } %>
	<% if(isMulti && webtoonModel.get('webtoon').payEpisodeSize==0 && serviceType.indexOf('preview')==-1){ %>
	<span class="txt_share">공유 <em class="emph_share"><%= shareCount %></em></span>
	<span class="ico_comm ico_bar">|</span>
	<% } %>
    <% if(isPreview || previewEndDate){ %>
	<span class="txt_date"><%=  previewUpdate %>무료</span>
    <% } else { %>
	<span class="txt_date"><span class="screen_out">업데이트날짜 </span><%= update %></span>
    <% } %>
</div>
<% } %>

</script>
<script type="text/template" id="pagingTemp">
	<span class="inner_pages">
<% if(firstPage==1){ %>
	<span class="btn_comm btn_prev">이전목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_prev">이전</a>
<% } %>
<% for(var i=firstPage;(i<firstPage+5) && (i<=pageCount);i++){ %>
	<% if(nowPage==i) { %>
		<span class="screen_out">현재페이지</span>
		<em class="bg_comm link_page"><%= i %></em>
	<% } else { %>
		<a href="#none" class="link_page" data-page="<%= i %>"><%= i %></a>
	<% } %>
	<% if(!(i==firstPage+4||i==pageCount)){ %>
		<span class="txt_bar">·</span>
	<% } %>
<% } %>
<% if(firstPage+4>=pageCount){ %>
	<span class="btn_comm btn_next">다음목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_next">다음</a>
<% } %>
	</span>
</script>
<script type="text/template" id="promotionContentTemp">
	<h3 class="screen_out">관련상품</h3>
		<ul class="list_related">
		<% _.each(product,function(item){ %>
			<%
				var isNew = false;
				if(util.getPeriod(util.yyyymmddToDate(item.dateCreated))<7){
					isNew = true;
				};
			%>
			<li>
				<a href="<%= item.url %>" class="link_thumb">
					<img src="<%= item.image.url %>" width="384" height="180" class="img_thumb" alt="<%= item.title %>">
				</a>
				<div class="info_related">
					<strong class="tit_related">
						<a href="<%= item.url %>" class="link_related"><%= item.title %></a>
						<% if(isNew){ %>
						<span class="txt_new">NEW</span>
						<% } %>
					</strong>
					<span class="txt_detail"><%= item.content %></span>
					<span class="desc_sponsor">
						<span class="txt_sponsor">제공</span> <%= item.provider %>
					</span>
					<a href="<%= item.url %>" class="btn_comm btn_move">보러가기</a>
				</div>
			</li>
		<% }) %>
		<% if(pageCount>1 && product.length==1){ %>
			<li>
				<div class="related_nodata">“관련 상품이 없습니다.”</div>
			</li>
		<% } %>
		</ul>
<%  if(product.length>2){ %>
		<div class="paging_num">
			<span class="inner_paging">
			<% if(page==1){ %>
				<span class="btn_comm btn_prev">이전 목록 없음</span>
			<% } else { %>
				<button type="button" class="btn_comm btn_prev">이전</button>
			<% } %>
		<% for(var i=0;i<pageCount;i++){ %>
			<% if(i+1==page){ %>
				<span class="screen_out">현재페이지</span>
				<em class="btn_comm num_page" data-page="<%= i+1 %>"><%= i+1 %></em>
			<% } else { %>
				<button type="button" class="btn_comm num_page" data-page="<%= i+1 %>"><%= i+1 %></button>
			<% } %>
		<% } %>
			<% if(pageCount==page){ %>
				<span class="btn_comm btn_next">다음 목록 없음</span>
			<% } else { %>
				<button type="button" class="btn_comm btn_next">다음</button>
			<% } %>
			</span>
		</div>
<% } %>
</script>
<script type="text/template" id="otherProductTemp">
<% if(anotherWebtoonType == 'recommend'){ %>
	<div class="other_nodata">
		<h3 class="tit_nodata">추천작품</h3>
		<p class="txt_nodata">"작가의 다른 작품이 없습니다. 이런 작품은 어떠세요?"</p>
	</div>
	<ul class="list_other">
	<% _.each(data, function(item){ %>
		<li>
			<a href="/webtoon/view/<%= item.nickname %>" class="link_wt ?c_id=<%= item.nickname %>&c_source=<%= (item.cartoon.artists && item.cartoon.artists.length>0 && item.cartoon.artists[0].penName)?item.cartoon.artists[0].penName:'' %>">
				<% if(item.pcThumbnailImage){ %>
				<img src="<%= item.pcThumbnailImage.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
				<% } else { %>
				<img src="<%= item.thumbnailImage2.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
				<% } %>
				<span class="thumb_cover"></span>
				<strong class="tit_wt"><%= item.title %></strong>
			</a>
		</li>
	<% }) %>
	</ul>
<% } else if(anotherWebtoonType == 'artist') { %>
	<h3 class="tit_other">작가의 다른작품 <span class="num_product">(<%= data.length %>)</span></h3>
	<div class="slide_other">
		<ul class="list_other" style="left:0;width:<%= 676*Math.ceil(data.length/4) %>px">
		<% _.each(data, function(item){ %>
			<li>
				<a href="/webtoon/view/<%= item.nickname %>" class="link_wt ?c_id=<%= item.nickname %>&c_source=<%= (item.cartoon.artists && item.cartoon.artists.length>0 && item.cartoon.artists[0].penName)?item.cartoon.artists[0].penName:'' %>">
					<% if(item.pcThumbnailImage){ %>
					<img src="<%= item.pcThumbnailImage.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
					<% } else { %>
					<img src="<%= item.thumbnailImage2.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
					<% } %>
					<span class="thumb_cover"></span>
					<strong class="tit_wt"><%= item.title %></strong>
				</a>
			</li>
		<% }) %>
		</ul>
	</div>
	<% if(data.length>4){ %>
	<div class="box_btn">
		<span class="btn_comm btn_prev">이전으로</span>
		<button type="button" class="btn_comm btn_prev" style="display:none">이전으로</button>
		<span class="btn_comm btn_next" style="display:none">다음으로</span>
		<button type="button" class="btn_comm btn_next">다음으로</button>
	</div>
	<% } %>
<% } %>
</script>

<script type="text/template" id="cmtPagingTemp">
<%
	var pageLength = Math.ceil(allCount/20);
%>
<span class="inner_pages">
<% if(firstPage == 1){ %>
	<span class="btn_comm btn_prev">이전목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_prev">이전</a>
<% } %>
<% for(var i=0;i<5;i++){ %>
	<% if(i+firstPage<=pageLength){ %>
		<% if(i+firstPage == nowPage){ %>
			<span class="screen_out">현재페이지</span><em class="bg_comm link_page"><%= i+firstPage %></em>
		<% } else if(i+firstPage>allCount){ %>
		<% } else if(i+firstPage+1==nowPage){ %>
			<a href="#none" class="link_page"><%= i+firstPage %></a>
		<% } else { %>
			<a href="#none" class="link_page"><%= i+firstPage %></a>
			<% if(i!=4 && i+firstPage<pageLength){ %>
				<span class="txt_bar">·</span>
			<% }; %>
		<% }; %>
	<% }; %>
<% }; %>
<% if(firstPage+4>pageLength){ %>
	<span class="btn_comm btn_next">다음목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_next">다음</a>
<% } %>
</span>
</script>

<script type="text/template" id="payBarTemp">
	<% allPrice = (count.preview.count*count.preview.price) + (count.pay.count*count.pay.price) %>
	<div class="bg_pay"></div>
	<!-- step1 상품선택 -->
	<strong class="screen_out">결제금액 확인</strong>
	<div class="area_pay">
		<div class="wrap_pay">
			<% if(count.pay.count>0 && count.preview.count>0){ %>
			<div class="cal_pay cal_pay<%= _.size(count) %>">
			<% } else { %>
			<div class="cal_pay">
			<% }; %>

				<% _.each(count, function(c){ %>
                    <% if(c.count>0 || (count.preview.count==0 && count.pay.count==0 && c==count.pay)){ %>
                        <%
                            var priceText = util.addComma(c.price).split('');
                            var mountText = util.addComma(c.count).split('');
                            var resultPriceText = util.addComma(c.count * c.price).split('');
                        %>
                        <div class="cal_nums">
                        <% if(count.preview==c){ %>
                                                        <span class="txt_comm txt_preview"></span>
                        <% } else { %>
                                                        <span class="txt_comm"></span>
                        <% } %>
                            <% _.each(priceText, function(p){ %>
                                <% if(p==','){ %>
                                    <span class="num_pay txt_dot"></span>
                                <% } else { %>
                                    <span class="num_pay txt_num<%= p %>"></span>
                                <% } %>
                            <% }); %>
                            <span class="num_pay txt_won"></span> <!-- '원' -->
                            <span class="num_pay txt_multipli"></span> <!-- '곱하기' -->
                            <div class="cnt_episodes">
                                <% _.each(mountText, function(m){ %>
                                <span class="num_pay txt_num<%= m %>"></span>
                                <% }); %>
                            </div>
                            <span class="num_pay txt_piece"></span> <!-- '화' -->
                            <span class="num_pay txt_equal"></span> <!-- '=' -->
                            <% _.each(resultPriceText, function(rp){ %>
                                <% if(rp==','){ %>
                                    <span class="num_pay txt_dot"></span>
                                <% } else { %>
                                    <span class="num_pay txt_num<%= rp %>"></span>
                                <% } %>
                            <% }); %>
                            <span class="num_pay txt_won"></span> <!-- '원' -->
                        </div>
                    <% } %>
				<% }) %>

				<p class="desc_login">
					<span class="txt_login"><span class="ico_dot"></span>결제 후 <%= period?period:7 %>일간 이용 가능 (미리보기는 무료전환 시까지)</span>
					<% if(!isCouponAvailable){ %>
					<span class="txt_login txt_stress"><span class="ico_dot"></span>해당 작품은 제공사의 요청에 의해 선물 받은 웹툰캐시로 결제 할 수 없습니다.</span>
					<% } %>
				</p>
			</div>
				<% if(allPrice==0){ %>
				<button type="button" class="btn_pay" id="payNextBtn" style="background-color:#5b5b5b;cursor:default"><span class="txt_comm txt_sum">결제금액</span><%= util.addComma(allPrice) %>원</button>
				<% } else { %>
				<button type="button" class="btn_pay" id="payNextBtn"><span class="txt_comm txt_sum">결제금액</span><%= util.addComma(allPrice) %>원</button>
				<% }; %>
		</div>
	</div>
	<!-- //step1 상품선택 -->
	<button class="btn_comm btn_close" id="closePayBarBtn">결제 팝업 닫기</button>
</script>
<script type="text/template" id="payBarTemp2">
	<%
		var myWebtoonCash = item.webtoonCashAmount + item.couponCashAmount;
		var isDisableWebtoonCash = !isCouponAvailable && item.webtoonCashAmount < allPrice;
    	var canPayWebtoonCash = (item.webtoonCashAmount >= allPrice) || (isCouponAvailable && myWebtoonCash >= allPrice);
	%>
	<div class="notice_popup">
		브라우저 설정에서 팝업창을 허용해주세요!
	</div>
	<div class="bg_pay"></div>
	<strong class="screen_out">결제수단 선택</strong>
	<div class="area_pay">
		<div id="vpBnr" class="link_event"></div>
		<ul class="list_pay">

				<% if(isDisableWebtoonCash){ %>
			<li class="disabled">
			<% } else if(canPayWebtoonCash){ %>
			<li class="select_on">
				<label for="payWcash" class="lab_sort">웹툰캐시</label>
				<input type="radio" id="payWcash" name="paySort" class="inp_radio" checked="checked">
			<% } else { %>
			<li>
			<% } %>
				<span class="ico_comm ico_radio">선택</span>
				<span class="txt_comm txt_wcash"></span>
				<span class="screen_out">보유금액</span>
				<% if(item.webtoonCashAmount>0){ %>
				<p class="desc_cash desc_cash2">
					<span class="txt_cash">충전 내역 <%= util.addComma(item.webtoonCashAmount) %>원</span>
					<% if(isCouponAvailable){ %>
					<span class="txt_cash">선물 내역 <%= util.addComma(item.couponCashAmount) %>원</span>
					<% } else { %>
					<span class="txt_cash disabled">선물 내역 <%= util.addComma(item.couponCashAmount) %>원</span>
					<% } %>
				<% } else { %>
				<p class="desc_cash">
					<em class="emph_cash"><%= util.addComma(item.couponCashAmount) %>원</em>
				<% } %>
				<% if(myWebtoonCash<allPrice){ %>
					<span class="txt_sort txt_lack" style="display:none">잔액이 부족합니다.</span>
				<% } %>
                </p>
				<a href="/my/coupon?couponRegist" class="link_cash">등록<span class="ico_comm ico_arr"></span></a>
			</li>

				<% if((isDisableWebtoonCash || !canPayWebtoonCash) && item.cashAmount >= allPrice){ %>
			<li class="select_on">
				<label for="payDcash" class="lab_sort">다음캐시</label>
				<input type="radio" id="payDcash" name="paySort" class="inp_radio" checked="checked">
			<% } else if(item.cashAmount < allPrice) { %>
			<li>
			<% } else { %>
			<li>
                <label for="payDcash" class="lab_sort">다음캐시</label>
                <input type="radio" id="payDcash" name="paySort" class="inp_radio">
			<% } %>
				<span class="ico_comm ico_radio">선택</span>
				<span class="txt_comm txt_dcash"></span>
				<span class="screen_out">보유금액</span>
                <p class="desc_cash">
                    <% if(item.cashAmount>-1){ %>
                    <span class="emph_cash"><%= util.addComma(item.cashAmount) %>원</span>
                    <% } else { %>
                    <span class="txt_cash">점검중</span>
                    <% } %>
				</p>
			<% if(item.cashAmount>-1 && item.cashAmount < allPrice){ %>
                <span class="txt_sort txt_lack" style="display:none">잔액이 부족합니다.</span>
			<% } %>
				<a href="#none" class="link_cash" id="cashChargeBtn">충전<span class="ico_comm ico_arr"></span></a>
			</li>

				<% if((isDisableWebtoonCash || !canPayWebtoonCash) && item.cashAmount < allPrice){ %>
			<li class="select_on">
				<label for="payGeneral" class="lab_sort">일반결제</label>
				<input type="radio" id="payGeneral" name="paySort" class="inp_radio" checked="checked">
			<% } else { %>
			<li>
                <label for="payGeneral" class="lab_sort">일반결제</label>
                <input type="radio" id="payGeneral" name="paySort" class="inp_radio">
			<% } %>
				<span class="ico_comm ico_radio">선택</span>
				<span class="txt_comm txt_general"></span>
				<span class="txt_sort">모바일, 카드<br>무통장 입금 등</span>
			</li>
		</ul>

		<% if((isDisableWebtoonCash || !canPayWebtoonCash) && item.cashAmount < allPrice){ %>
		<button type="button" class="btn_pay" id="payBtn"><span class="txt_comm txt_direct txt_direct2">결제하기</span><%= util.addComma(allPrice) %>원</button>
		<% } else { %>
		<button type="button" class="btn_pay" id="payBtn"><span class="txt_comm txt_direct">바로결제</span><%= util.addComma(allPrice) %>원</button>
		<% } %>
	</div>
	<!-- //step2 결제수단선택 -->
	<button class="btn_comm btn_close">결제 팝업 닫기</button>
</script>

<script type="text/template" id="payAgreeAreaTemp">
	<div class="inner_terms">
		<form action="#" id="payAgreeForm">
			<fieldset>
				<legend class="screen_out">다음웹툰 유료서비스 약관 동의 선택폼</legend>
				<strong class="tit_comm">다음웹툰 유료서비스 약관</strong>
				<div class="box_terms">
					<strong class="tit_terms">제1장 총칙</strong>
<em class="txt_terms">제1조 (목적)</em>
<p class="desc_terms">
    이 약관은 (주)카카오(이하 "회사"라 합니다)가 제공하는 Daum 웹툰 서비스(이하 “서비스”라 합니다) 내에서 유료서비스의 이용과 관련하여
    회사와 회원의 권리, 의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다.
</p>

<em class="txt_terms">제2조 (약관의 적용)</em>
<p class="desc_terms">본 약관은 회원이 서비스 내에서 유료로 제공되는 서비스를 이용하고자 하는 경우, 본 약관에 별도로 동의한 회원에게 적용됩니다.</p>

<em class="txt_terms">제3조 (정의)</em>
<ul>
    <li>
        ① 이 약관에서 사용하는 용어의 정의는 다음과 같습니다.
        <ul class="list_terms">
            <li>1. “회원”이라 함은 본 약관에 따라 회사와 이용계약을 체결하여 회사 또는 판매자가 제공하는 유료서비스를 이용하는 자를 말합니다.</li>
            <li>2. “유료서비스”라 함은 회사 또는 판매자가 유료로 제공하는 웹툰 작품 등 각종 온라인 디지털콘텐츠 및 이를 이용하는데 수반되는 관련 서비스를 말합니다.</li>
            <li>
                3. “캐시”는 회원이 유료서비스 이용 시 사용할 수 있는 결제수단을 말하고, ”캐시”는 아래와 같은 종류가 있습니다.
                <ul class="list_terms">
                    <li>
                        가. 다음캐시 : Daum 내결제 서비스를 이용하여 회사가 운영하는 웹사이트, 모바일 플랫폼 및 제휴사 서비스 등에서 재화 또는 용역을 구매할 수 있는 선불전자지급수단으로,
                        충전된 캐시는 마지막으로 이용한 날로부터 육십(60)개월이 경과하는 동안 해당 수단을 한번도 적립하거나 사용하지 않은 경우 자동소멸됩니다.
                        다음캐시의 사용 등에 관한 자세한 사항은 카카오 전자금융거래 이용약관(https://cash.daum.net/Skyline-section/agreement.daum)에서 확인하실 수 있습니다.
                    </li>
                    <li>
                        나. 웹툰캐시 : 서비스에서 웹툰 작품을 열람하기 위해 충전하여 사용할 수 있는 지급수단으로,
                        충전된 웹툰캐시는 마지막으로 이용한 날로부터 육십(60)개월이 경과하는 동안 해당 수단을 한번도 사용하지 않은 경우 자동 소멸됩니다.
                        단, 서비스 내에서 회사 및 제3자가 진행하는 이벤트 활동 등을 통하여 리워드로 지급받거나 쿠폰 등을 통하여 충전한 웹툰캐시의 경우에는 지급 시 명시된 기간 내에만 사용이 가능합니다.
                    </li>
                </ul>
            </li>
        </ul>
    <li>② 본 약관에서 사용되는 용어 중 본 조에서 정하지 아니한 부분은 관계 법령 및 일반 관례에 따릅니다.</li>
</ul>

<em class="txt_terms">제4조 (신원정보 등의 제공)</em>
<p class="desc_terms">
    회사는 이 약관의 내용, 상호, 대표자 성명, 전화번호, 팩스번호, 사업자등록번호 등을 회원이 쉽게 알 수 있도록 유료서비스 화면에 순차적으로 게시합니다.
    다만, 대표자 성명, 팩스번호, 사업자등록번호 및 이 약관은 회원이 유료서비스 화면에서 순차적으로 연결된 화면을 통하여 볼 수 있도록 할 수 있습니다.
</p>

<em class="txt_terms">제5조 (약관의 게시, 개정 등)</em>
<ul>
    <li>① 회사는 본 약관의 내용을 회원이 쉽게 확인할 수 있도록 서비스 초기 화면 또는 별도의 연결화면에 게시합니다.</li>
    <li>② 회사는 「콘텐츠산업진흥법」, 「전자상거래등에서의 소비자보호에 관한 법률」, 「약관의 규제에 관한 법률」 등 관계 법령을 위반하지 않는 범위에서 이 약관을 개정할 수 있습니다.</li>
    <li>
        ③ 회사가 약관을 개정할 경우에는 적용일자 및 개정사유를 명시하여 현행 약관과 함께 회사가 운영하는 서비스 내의 적절한 장소에 개정약관의 적용일자 15일 전부터 적용일 이후 상당한 기간 동안 공지합니다.
        다만, 회원에게 불리한 약관의 개정의 경우에는 적용일자 30일 전부터 공지하고, 회원이 가입 시 제공한 전자우편, 서비스 내 팝업 화면 등의 전자적 수단을 통하여 고지합니다.
    </li>
    <li>
        ④ 회사가 전항에 따라 개정약관을 공지 또는 통지하면서 회원에게 약관 변경 적용일 까지 거부의사를 표시하지 아니할 경우,
        약관의 변경에 동의한 것으로 간주한다는 뜻을 명확하게 공지 또는 통지하였음에도 회원이 명시적으로 거부의 의사표시를 하지 아니한 경우 회원이 개정약관에 동의한 것으로 봅니다.
    </li>
    <li>
        ⑤ 회원이 개정약관의 적용에 동의하지 않는 경우 회사는 개정 약관의 내용을 적용할 수 없으며, 이 경우 회원은 이용계약을 해지할 수 있습니다.
        다만, 기존 약관을 적용할 수 없는 특별한 사정이 있는 경우에는 회사는 이용계약을 해지할 수 있습니다.
    </li>
</ul>

<em class="txt_terms">제6조 (회원에 대한 통지)</em>
<ul>
    <li>① 회사가 회원에 대한 통지를 하는 경우 이 약관에 별도 규정이 없는 한 서비스 내 공지 화면, 회원이 제공한 전자우편, 전자쪽지, 팝업 화면 등으로 할 수 있습니다.</li>
    <li>
        ② 회사는 회원 전체에 대한 통지의 경우 7일 이상 회사가 운영하는 서비스 내의 게시판 등에 게시함으로써 제1항의 통지에 갈음할 수 있습니다.
        다만, 회원 본인의 거래와 관련하여 중대한 영향을 미치는 사항에 대하여는 제1항의 방법으로 통지합니다.
    </li>
    <li>③ 회사는 회원의 연락처 미기재, 변경 후 미수정 등으로 인하여 개별 통지가 어려운 경우에 한하여 전항의 공지를 함으로써 개별 통지를 한 것으로 간주합니다.</li>
</ul>

<strong class="tit_terms">제2장 이용계약 체결 및 유료서비스 이용</strong>

<em class="txt_terms">제7조 (유료서비스의 내용 등의 게시)</em>
<ul>
    <li>
        ① 회사는 다음 사항을 해당 유료서비스의 이용초기화면이나 그 포장, FAQ 등에 회원이 알기 쉽게 표시합니다.
        <ul class="list_terms">
            <li>1. 유료서비스의 명칭 또는 제호</li>
            <li>2. 유료서비스의 내용, 이용방법, 이용료 기타 이용조건</li>
        </ul>
    </li>
    <li>② 회사의 유료서비스의 이용가능기기 및 이용에 필요한 최소한의 기술사양은 권장사양정보에 따릅니다.</li>
    <li>③ 회사는 유료서비스를 제공함에 있어 유료서비스의 교환•반품•보증과 그 대금 환불의 조건 및 절차에 관한 사항을 제공합니다.</li>
</ul>

<em class="txt_terms">제8조 (이용계약의 성립 등)</em>
<ul>
    <li>
        ① 회원은 회사가 제공하는 다음 또는 이와 유사한 절차에 의하여 이용신청을 합니다. 회사는 계약 체결 전에 각 호의 사항에 관하여 회원이 정확하게 이해하고 실수 또는 착오 없이 거래할 수 있도록 정보를 제공합니다.
        <ul class="list_terms">
            <li>1. 유료서비스의 내용, 이용방법, 이용료 및 기타 이용조건 확인 및 선택</li>
            <li>2. 결제방법의 선택 및 결제정보의 입력</li>
            <li>3. 유료서비스의 이용신청에 관한 확인 또는 회사의 확인에 대한 동의</li>
        </ul>
    </li>
    <li>
        ② 회사는 회원의 이용신청이 다음 각 호에 해당하는 경우에는 승낙하지 않거나 승낙을 유보할 수 있습니다.
        <ul class="list_terms">
            <li>1. 실명이 아니거나 타인의 명의를 이용한 경우</li>
            <li>2. 허위의 정보를 기재하거나, 회사가 제시하는 내용을 기재하지 않은 경우</li>
            <li>3. 미성년자가 「청소년보호법」에 의해서 이용이 금지되는 유료서비스를 이용하고자 하는 경우</li>
            <li>4. 서비스 관련 설비의 여유가 없거나, 기술상 또는 업무상 문제가 있는 경우</li>
            <li>5. 카카오 또는 Daum 회원 자격을 상실하는 경우</li>
            <li>6. 기타 회원의 귀책사유로 승인이 불가능하다고 판단되는 경우</li>
        </ul>
    </li>
    <li>③ 이용계약의 성립시기는 가입완료, 구매완료를 신청절차 상에서 표시한 시점으로 합니다.</li>
    <li>④ 회원이 유료서비스를 이용하기 위해서는 이 약관에 동의 후 회사가 정한 해당 유료서비스에 따른 이용조건에 따라 이용요금을 지급하여야 합니다.</li>
</ul>

<em class="txt_terms">제9조 (미성년자 이용계약에 관한 특칙)</em>
<ul>
    <li>
        ① 회사는 회원에 대하여 「청소년보호법」 등에 따른 등급 및 연령 준수를 위해 이용제한이나 등급별 제한을 할 수 있고, 성인인증 절차를 거치도록 할 수 있습니다.
        또한 회사는 회원이 만19세 미만 열람 불가의 작품을 이용하고자 하는 경우, 관계 법령에 따라 1년 단위로 회원의 나이 및 본인 여부를 확인합니다.
    </li>
    <li>
        ② 회사는 만 19세 미만의 미성년 회원이 유료서비스를 이용하고자 하는 경우에 부모 등 법정대리인의 동의를 얻거나,
        계약체결 후 추인을 얻지 않으면 미성년자 본인 또는 법정대리인이 그 계약을 취소할 수 있다는 내용을 계약체결 전에 고지하는 조치를 취합니다.
    </li>
</ul>

<em class="txt_terms">제10조 (본인인증)</em>
<p class="desc_terms">회원은 회사의 정책에 따라 서비스 이용 시작 후 최초로 결제하는 시점 또는 회원이 기다리면 무료 이용권을 최초로 이용하는 시점 중 빠른 시점에 실명에 대한 확인을 하여야 합니다. </p>

<em class="txt_terms">제11조 (지급방법)</em>
<ul>
    <li>
        ① 회원은 유료서비스에 대하여 다음 각 호의 방법 중 가능한 방법을 선택하여 결제할 수 있으며, 회사는 회원이 선택한 결제 방법에 대하여 어떠한 명목의 수수료도 추가하여 징수하지 않습니다.
        단, 회원이 선택한 결제수단의 제공업체가 별도로 존재하는 경우, 회원은 해당 결제수단을 이용하기 전에 해당 결제수단에서 요구되는 절차를 이행하여야 합니다.
        <ul class="list_terms">
            <li>1. 선불카드, 직불카드, 신용카드 등의 각종 카드결제</li>
            <li>2. 전화 또는 휴대전화를 이용한 결제</li>
            <li>3. 폰뱅킹, 인터넷뱅킹, 메일뱅킹, 온라인 무통장 입금 등의 각종 계좌이체</li>
            <li>4. 전자화폐에 의한 결제</li>
            <li>5. 캐시에 의한 결제</li>
            <li>6. 앱마켓 등을 통한 인앱결제(In-app purchase)</li>
            <li>7. 회사와 계약을 맺었거나 회사가 인정한 상품권에 의한 결제</li>
            <li>8. 캐시백, 신용카드 등의 포인트에 의한 결제</li>
            <li>9. 기타 전자적 지급방법에 의한 대금지급 등</li>
        </ul>
    </li>
    <li>
        ② 회사의 정책 및 전항의 결제수단 제공업체(이동통신사, 카드사 등)의 기준에 따라 각 회원의 월 누적 결제액 및 충전한도가 제한될 수 있습니다.
        해당 기준을 초과한 경우 유료서비스의 추가 이용은 불가능할 수 있습니다.
    </li>
</ul>

<em class="txt_terms">제12조 (유료서비스의 제공 및 중단)</em>
<ul>
    <li>① 회사는 유료서비스를 연중무휴, 1일 24시간 제공함을 원칙으로 합니다.</li>
    <li>
        ② 회사는 컴퓨터 등 정보통신설비의 보수점검, 교체 및 고장, 통신두절 또는 운영상 상당한 이유가 있는 경우 유료서비스의 제공을 일시적으로 중단할 수 있고,
        이 경우 회사는 제6조(회원에 대한 통지)에 정한 방법으로 회원에게 통지합니다.
        다만, 회사가 사전에 통지할 수 없는 불가피한 사유가 있는 경우 사후에 통지할 수 있습니다.
    </li>
    <li>③ 회사는 유료서비스의 제공에 필요한 경우 정기점검을 실시할 수 있으며, 정기점검시간은 별도로 유료서비스 제공화면에 공지한 바에 따릅니다.</li>
    <li>
        ④ 사업종목의 전환, 사업의 포기, 분할·합병 등의 이유로 유료서비스를 제공할 수 없게 되는 경우에 회사는 제6조(회원에 대한 통지)에서 정한 방법으로 회원에게 통지하고,
        이 약관에서 정한 바 또는 회사가 별도로 통지하는 바에 따라 회원에게 보상합니다.
    </li>
</ul>

<div class="wrap_important">
    <em class="txt_terms">제13조 (유료서비스의 변경)</em>
    <ul>
        <li>
            ① 회사는 상당한 이유가 있는 경우에 운영상, 기술상의 필요에 따라 제공하고 있는 전부 또는 일부의 유료서비스를 변경할 수 있습니다.
            다만, 변경된 내용이 중대하거나 회원에게 불리한 경우에는 회사가 해당 유료서비스를 제공받는 회원에게 제6조(회원에 대한 통지)에서 정한 방법으로 통지합니다.
        </li>
        <li>
            ② 회사는 전항에 따른 서비스 변경에 대한 동의를 거절한 회원에 대하여는 변경 전 서비스를 제공합니다.
            다만, 변경 전 서비스 제공이 불가능할 경우 회사는 해당 회원에게 해당 서비스의 제공을 중지하거나 계약을 해지할 수 있습니다.
            이 경우 환불 등은 제19조(회원의 이용계약 해지 또는 해제)에 따라 진행됩니다.
        </li>
    </ul>
</div>

<strong class="tit_terms">제3장 계약당사자의 의무</strong>

<em class="txt_terms">제14조 (회사의 의무)</em>
<ul>
    <li>① 회사는 관계 법령과 본  약관이 금지하거나 미풍양속에 반하는 행위를 하지 않으며, 계속적이고 안정적으로 유료서비스를 제공하기 위하여 최선을 다하여 노력합니다.</li>
    <li>② 회사는 회원이 안전하게 유료서비스를 이용할 수 있도록 개인정보(신용정보 포함)보호를 위한 보안시스템을 갖추며, 개인정보처리방침을 공지하고 이를 준수합니다.</li>
    <li>③ 회사는 유료서비스 이용과 관련하여 회원으로부터 제기된 의견이나 불만이 정당하다고 인정할 경우에는 이를 처리하여야 합니다. 회원이 제기한 의견이나 불만사항에 대해서는 회원에게 처리과정 및 결과를 전달합니다.</li>
    <li>
        ④ 회사는 전자상거래등에서의 소비자보호에 관한 법률에 따라 아래 각 호의 항목을 각 호에 명시된 기간동안 보관합니다.
        <ul class="list_terms">
            <li>1. 계약 또는 청약철회 등에 관한 기록: 5년</li>
            <li>2. 대금결제 및 재화 등에 공급에 관한 기록: 5년</li>
            <li>3. 소비자의 불만 또는 분쟁처리에 관한 기록: 3년</li>
        </ul>
    </li>
</ul>

<em class="txt_terms">제15조 (회원의 의무)</em>
<ul>
    <li>
        ① 회원은 유료서비스 이용 전에 반드시 회사 또는 판매자가 제공하는 유료서비스의 상세 내용과 거래의 조건을 정확하게 확인한 후 구매를 하여야 합니다.
        거래의 내용과 조건을 확인하지 않고 구매하여 발생한 손실 또는 손해는 회원에게 귀속됩니다.
    </li>
    <li>② 회원은 본 약관 및 회사가 유료서비스와 관련하여 회원에게 고지하는 내용을 준수하여야 하며, 본 약관 및 고지 내용을 위반하거나 이행하지 아니하여 발생하는 손실, 손해에 대하여 책임을 부담합니다.</li>
    <li>③ 회원은 유료 서비스 이용을 위한 이용 대금 결제 시 회사가 정하는 방식에 따라 캐시 등을 사용하여야 합니다.</li>
    <li>
        ④ 회원은 유료서비스를 이용할 때 다음 각호에 해당하는 행위를 해서는 안 됩니다.
        <ul class="list_terms">
            <li>1. 회사가 제공하는 유료서비스 이용방법에 의하지 아니하고 비정상적인 방법으로 유료서비스를 이용하거나 시스템에 접근하는 행위</li>
            <li>2. 타인의 명의, 카드정보, 계좌정보 등을 도용하여 회사가 제공하는 유료서비스를 이용하는 행위</li>
            <li>3. 회사가 정하지 않은 비정상적인 방법으로 캐시를 취득하거나 사용하는 행위</li>
            <li>4. 회사가 게시한 정보의 무단 변경 또는 회사가 정한 정보 이외의 정보(컴퓨터 프로그램 등) 등의 송신 또는 게시하는 행위</li>
            <li>5. 회사 및 기타 제3자의 저작권 등 지적재산권에 대한 침해행위</li>
            <li>6. 회사 및 기타 제3자의 명예를 손상시키거나 업무를 방해하는 행위</li>
            <li>7. 외설 또는 폭력적인 메시지, 화상, 음성, 기타 공서 양속에 반하는 정보를 유료서비스에 공개 또는 게시하는 행위</li>
            <li>8. 기타 불법적이거나 부당한 행위</li>
        </ul>
    </li>
</ul>

<em class="txt_terms">제16조 (저작권의 귀속)</em>
<ul>
    <li>
        ① 서비스에 따라 제공되는 각 웹툰 작품에 대한 저작권 등 지식재산권은 회사, 각 작품의 제공자(작가 또는 발행처)에게 귀속되고,
        회원은 서비스 이용을 위해서 결제 대금을 지급한 작품에 한하여 서비스에 정해진 기간 등 조건에 따라 각 웹툰 작품의 이용을 허락 받습니다.
    </li>
    <li>
        ② 회원은 서비스를 이용하는 과정에서 회사, 각 작품 또는 발행처의 작가에게 지식재산권이 귀속되는 작품 또는 정보를 지식재산권의 권리자로부터 사전 승낙을 받지 아니하고
        복제, 전송, 출판, 배포, 방송 기타 방법으로 이용하거나 제3자에게 이용하게 하여서는 안됩니다. 다만, 저작권법 및 콘텐츠산업진흥법 등에서 이를 허용한 경우에는 그러하지 않습니다.
    </li>
</ul>

<em class="txt_terms">제17조 (휴면회원 전환)</em>
<p class="desc_terms">회사는 회원이 1년 이상 서비스 이용을 위해 로그인을 하지 않은 경우, 회원의 ID를 휴면계정으로 전환하고 회원의 개인정보를 별도로 보관∙관리하고 회원의 서비스 이용을 제한할 수 있습니다.</p>

<strong class="tit_terms">제4장 청약철회, 계약해지 및 이용제한 등</strong>

<div class="wrap_important">
    <em class="txt_terms">제18조 (회원의 청약철회)</em>
    <ul>
        <li>
            ① 회원은 본 이용계약에 따라 서비스를 이용하기 위해 유료 결제를 한 날로부터 7일 이내에 회사에 대해 서비스의 이용에 관한 청약을 철회할 수 있습니다.
            다만, 회사가 회원에게 사전에 합의한 내용과 다르게 서비스를 제공하거나 서비스를 제공하지 아니하는 경우,
            회원은 유료 결제를 한 날로부터 3개월 이내 또는 해당 사실을 알거나 알 수 있었던 날로부터 30일 이내에 회사에 대해 서비스의 이용에 관한 청약을 철회할 수 있습니다.
        </li>
        <li>
            ② 제1항에도 불구하고, 「문화산업진흥 기본법」 제2조 제5호의 디지털콘텐츠의 제공이 개시된 경우에는 회사의 의사에 반하여 서비스의 이용에 관한 청약을 철회할 수 없습니다.
            다만, 가분적 디지털콘텐츠로 구성된 계약의 경우에는 제공이 개시되지 아니한 부분에 대하여는 철회가 가능합니다.
        </li>
    </ul>

    <em class="txt_terms">제19조 (회원의 이용계약 해지 또는 해제)</em>
    <ul>
        <li>
            ① 회원은 다음 각 호의 사유가 있을 때 전화, 전자우편 등으로 회사에게 의사표시를 발송하여 본 이용계약을 해지 또는 해제할 수 있습니다.
            <ul class="list_terms">
                <li>
                    1. 회사에게 서비스의 하자 보완을 요청하였으나 회사가 이를 보완∙수정하지 않거나 보완∙수정할 수 없는 경우,
                    회원은 서비스의 하자 보완을 요청한 날로부터 1개월 이후 회사에게 이용계약의 해지 또는 해제를 통보할 수 있습니다.
                </li>
                <li>2. 회원이 본 약관 또는 카카오계정 약관, 카카오 서비스 약관, 카카오 통합 약관 또는 카카오 통합서비스약관(계정통합 진행한 경우) 및 Daum 서비스 약관(이하 통칭하여 “카카오 서비스 약관들”이라 합니다)의 변경에 동의하지 않아 서비스 이용을 중지하고자 하는 경우 회원은 회사에게 이용계약의 해지 또는 해제를 통보할 수 있습니다.</li>
                <li>3. 회원이 서비스를 더 이상 이용하지 않고자 하는 경우 회원은 회사에게 이용계약의 해지 또는 해제를 통보할 수 있습니다.</li>
            </ul>
        </li>
        <li>
            ② 회사는 회원으로부터 본 이용계약의 해제 또는 해지의 의사표시를 수령한 날로부터 3 영업일 이내에 회원이 서비스 이용을 위해 지급하고 사용하지 않은
            유료 결제대금을 회원이 해당 대금을 결제한 방법과 동일한 방법으로 이를 환급하여야 하며,
            동일한 방법으로 환불이 불가한 경우 이를 사전에 회원에게 고지합니다.
            다만, 회원의 수납 확인이 필요한 결제수단으로 이용 대금을 결제한 경우 회사는 수납 확인일로부터 3 영업일 이내에 이를 회원에게 환급하도록 합니다.
        </li>
        <li>
            ③ 회사가 전항에 따라 회원에게 유료 결제대금을 환급하는 경우, 회사는 회원이 서비스 이용으로부터 얻은 이익 및 환불수수료(10% 또는 1,000원 중 큰 금액)에 해당하는 금액을 공제한 나머지 대금을 회원에게 환급할 수 있습니다.
            또한, 회사가 회원에게 무상으로 지급한 캐시는 환불 대상에서 제외됩니다.
        </li>
        <li>
            ④ 회사는 제2항에 따라 회원에게 결제 대금을 환급함에 있어서 회원이 신용카드 또는 전자화폐 등의 결제수단으로 이용 대금을 지급한 때에는 지체없이 당해 결제수단을 제공한 사업자로 하여금
            이용 대금의 청구를 정지 또는 취소하도록 요청합니다. 다만, 제2항 단서 및 제3항의 경우는 그러하지 아니할 수 있습니다.
        </li>
        <li>
            ⑤ 회사는 앱마켓 결제(인앱결제)에 있어 해당 앱마켓에 대하여 대금지급의 정지∙취소 요청 등 「전자상거래등에서의 소비자보호에 관한 법률」에 따른 관련 조치를 취합니다.
            다만, 위와 같은 회사의 요청에 따른 해당 앱마켓의 조치에 관하여는 해당 앱마켓의 정책을 참조하여 주시기 바랍니다.
        </li>
        <li>
            ⑥ 회사와 서비스 이용을 위한 대금 지급 받은 자가 동일인이 아닌 경우, 회사와 서비스 이용을 위한 대금 지급을 받는 자는 청약철회 또는 계약해제,
            해지로 인한 결제 대금 환급과 관련한 의무의 이행에 있어서 연대하여 책임을 집니다.
        </li>
    </ul>

    <em class="txt_terms">제20조 (회사의 이용계약 해지 또는 해제)</em>
    <ul>
        <li>
            ① 회사는 회원이 카카오 서비스 약관들 또는 본 약관에 명시된 회원의 의무를 위반하였을 경우,
            회원에 대하여 본 이용 계약을 해제 또는 해지하거나 일정한 기간을 정하여 회원의 유료서비스의 이용을 제한할 수 있습니다.
        </li>
        <li>② 제1항의 해제, 해지는 회사가 정해진 통지 방법에 따라 회원에게 그 의사를 표시한 때에 효력이 발생합니다.</li>
        <li>
            ③ 회사가 본 조에 따라 회원의 귀책사유로 본 이용계약을 해지 또는 해제하는 경우,
            회사는 회원이 서비스 이용으로부터 얻은 이익 및 환불수수료(10% 또는 1,000원 중 큰 금액)에 해당하는 금액을 공제한 나머지 대금을 회원에게 환급할 수 있습니다.
        </li>
    </ul>
</div>

<em class="txt_terms">제21조 (과오금)</em>
<ul>
    <li>
        ① 회원에게 유료서비스 이용을 위한 대금이 잘못 과금된 경우, 회사는 회원이 대금을 결제한 방법과 동일한 방법으로 잘못 과금된 금액 전액을 환불하여야 합니다.
        다만, 동일한 방법으로 환불이 불가능할 때는 사전에 이를 회원에게 고지합니다.
    </li>
    <li>
        ② 회사의 책임 있는 사유로 회원에게 과오금이 발생한 경우, 회사는 비용, 수수료 등에 관계없이 잘못 과금된 금액 전액을 환불합니다.
        다만, 회원의 책임 있는 사유로 과오금된 경우, 회원은 합리적인 범위 내에서 회사가 잘못 과금된 대금을 환불하는데 소요되는 비용은 부담하여야 합니다.
    </li>
    <li>③ 회사는 본 조에 규정되지 않은 과오금된 대금의 환불은 관계 법령에서 정하는 바에 따릅니다.</li>
</ul>

<strong class="tit_terms">제5장 기타</strong>

<div class="wrap_important">
    <em class="txt_terms">제22조 (책임제한)</em>
    <ul>
        <li>① 회사가 관계 법령의 변경, 천재지변 또는 이에 준하는 불가항력으로 인하여 유료서비스를 제공할 수 없는 경우에는 유료서비스 제공에 관한 책임이 면제됩니다.</li>
        <li>② 회사는 회원의 귀책사유로 인한 유료서비스 이용의 장애에 대하여는 책임을 지지 않습니다.</li>
        <li>③ 회사는 회원이 유료서비스와 관련하여 게재한 정보, 자료, 사실의 신뢰도, 정확성 등의 내용에 관하여는 책임을 지지 않습니다.</li>
    </ul>
</div>

<em class="txt_terms">제23조 (약관의 해석)</em>
<p class="desc_terms">
    이 약관에서 정하지 아니한 사항과 이 약관의 해석에 관하여는 「정보통신망 이용촉진 및 정보보호에 관한 법률」,
    「콘텐츠산업진흥법」, 「전자상거래등에서의 소비자보호에 관한 법률」, 「약관의 규제에 관한 법률」, 문화체육관광부장관이 정하는 「디지털콘텐츠 이용자보호지침」 및 기타 관계 법령,
    카카오 서비스 약관들 또는 상관례에 따릅니다.
</p>

<em class="txt_terms">제24조 (준거법 및 분쟁 해결)</em>
<ul>
    <li>① 이 약관과 관련된 사항에 대하여는 대한민국법을 준거법으로 합니다.</li>
    <li>② 회사와 회원 간에 발생한 분쟁에 대해서는 상호 신의성실에 바탕한 협의로 해결하도록 하되, 상호 협의가 어려울 경우 민사소송법 상의 관할법원에 제소하여 분쟁을 해결합니다.</li>
</ul>

<em class="txt_terms">부칙</em>
<p class="desc_terms">이 약관은 2019년 6월 11일부터 적용됩니다.</p>				</div>
				<div class="box_agree">
					<button type="button" class="btn_comm btn_cancel">취소</button>
					<button type="submit" class="btn_comm btn_agree">동의</button>
				</div>
			</fieldset>
		</form>
	</div>
</script>

<script type="text/template" id="gidamooTemp">
	<%
		var interval = item.interval;
		if(interval/24>=1){
			var day = parseInt(interval/24, 10) + '일'
			var hour = interval%24;
    		interval = day + (hour?' '+hour+'시간':'');
		} else {
            interval += '시간';
		};
	%>

	<% if(item.ended){ %>
        기다리면무료 이용권 사용 불가 <span class="ico_comm ico_bar">|</span>
        <span class="txt_update">자세한 사항은 공지 내용을 참고해주세요.</span>
	<% } else { %>
                    <%= interval %>마다 무료 <span class="ico_comm ico_bar">|</span>
            <span class="txt_update">로그인 후 무료 이용권을 확인하세요.</span>
                    <a href="#none" class="ico_comm link_update" id="gidamooInfoBtn">상품 안내</a>
	<% } %>
</script>


<script type="text/template" id="ticketTemp">
	</script>

<script type="text/template" id="noticeTitleTemp">
	<a href="#none" class="link_notice" id="popupNoticeBtn"><span class="badge_notice" <% if(isGidamoo){ %> style="border:1px solid #6853e7;color:#6853e7" <% } %>>공지</span> <%= item.title %> <span class="ico_comm ico_arr"></span></a>
</script>

<script type="text/template" id="gidamooInfoTemp">
	<%
        var interval = item.interval;
        if(interval/24>=1){
            var day = parseInt(interval/24, 10) + '일'
            var hour = interval%24;
            interval = day + (hour?' '+hour+'시간':'');
        } else {
            interval += '시간';
        };
	%>
	<div class="layer_head">
		<strong class="tit_layer"><%= interval %>마다 1회 무료</strong>
	</div>
	<div class="layer_body">
		<ul class="list_order">
			<li><span class="dot_g"></span>유료 상품을 무료로 보는 이용권을 드립니다.</li>
			<li><span class="dot_g"></span>이용권의 생성/차감은 동일인 식별절차를 통해 확인된 모든 계정에 동일하게 적용됩니다.</li>
			<li><span class="dot_g"></span>최신 <em class="emph_txt">유료 <%= item.excludeEpisodes %>회차</em>는 해당 이용권으로 볼 수 없습니다.</li>
			<li><span class="dot_g"></span>해당 이용권으로 <em class="emph_txt"><%= item.period %>일</em>동안 감상할 수 있습니다.</li>
			<li><span class="dot_g"></span>지급된 이용권 사용 후 <em class="emph_txt"><%= interval %></em>을 기다리면 다시 이용권 1개를 드립니다.</li>
			<li><span class="dot_g"></span>선물 받은 이용권부터 먼저 소진됩니다.</li>
		</ul>
	</div>
	<a href="#none" class="btn_close"><span class="ico_comm ico_close">닫기</span></a>
</script>

<script type="text/template" id="ticketInfoTemp">
	<div class="layer_head">
		<strong class="tit_layer">무료 이용권</strong>
	</div>
	<div class="layer_body">
		<ul class="list_order">
			<li><span class="dot_g"></span>유료회차를 무료로 감상할 수 있는 이용권입니다.</li>
			<li><span class="dot_g"></span>미리보기 회차에는 사용 불가합니다.</li>
			<li><span class="dot_g"></span>기간 만료일 : <em class="emph_txt"><%= moment(item.ticketProduct.endDate).format('YYYY.MM.DD') + ' 23:59' %></em>까지</li>
			<li><span class="dot_g"></span>해당 이용권으로 <em class="emph_txt"><%= item.ticketProduct.period %>일</em>동안 감상할 수 있습니다.</li>
		</ul>
	</div>
	<a href="#none" class="btn_close"><span class="ico_comm ico_close">닫기</span></a>
</script>

<script type="text/template" id="noticeTemp">
	<div class="layer_head">
		<strong class="tit_layer"><%= item.title %></strong>
		<span class="txt_date"><%= moment(item.dateCreated).format('YYYY.MM.DD') %></span>
	</div>
	<div class="layer_body">
		<p>
            <%= item.content.replace(/\n/gi,'<br>') %>
		</p>
	</div>
	<a href="#none" class="btn_close"><span class="ico_comm ico_close">닫기</span></a>
</script>


<script type="text/javascript">
var webtoon = webtoon || {};
var webtoonModel = {};
var PAGE_SIZE = 25;
var ALL_PAGE_SIZE = 99999;
var choicedList = [];
var isLogin = false;
var isAgree = false;
var PayBarView;

var episodeStorage = null;
if(window.sessionStorage){
	episodeStorage = sessionStorage;
};

webtoon.view = function(nickname){
	//헤더
	var headerView = new webtoon.headerView();
	var EpisodeListView;

	var setEpisodeStorage = function(){
		if(episodeStorage){
			episodeStorage.setItem('episodes_1525', '');
			var episodeArr = choicedList;
			if(episodeArr.length==0){
				episodeArr = '';
			};
			episodeStorage.setItem('episodes_1525', episodeArr);
		};
	};

	var webtoonView = Backbone.View.extend({
		el : '#daumContent',
		events : {
			'click' : function(e){
				var episodeListTop = jQuery('#episodeList').offset().top;
				var episodeListHeight = jQuery('#episodeList').height() + episodeListTop;
				if(e.target==e.currentTarget && e.pageY>episodeListTop && e.pageY<episodeListHeight){
					EpisodeListView.closeMoreList();
				};
			},
			'click #payAgreeArea .btn_cancel' : function(){
				jQuery('#payAgreeArea').hide();
                jQuery('.layer_pay_agree').hide();
			},
			'submit #payAgreeForm' : function(e){
				e.preventDefault();
				util.showLoading();
				jQuery.ajax({
					url : '/data/my/modify_pay_agreement?isAgreed=true',
					method : 'POST',
					success : function(data){
						if(data.result.status=='200') {
							if(data.data.result == "SUCCESS") {
								location.reload();
							} else if(data.data.result = "FAILED") {
								alert(data.data.message);
							};
							util.hideLoading();
						} else {
							alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
							util.hideLoading();
						};
					}
				});
			}
		}
	});
	new webtoonView();

	//작품홈 상단
	var webtoonInfoView = Backbone.View.extend({
		el : '#cSub',
		initialize : function(){
			util.showLoading();
			this.renderTiara();

			var that = this;
			this.model = new webtoon.model({
				url : API.view.webtoon + nickname + '?' + timeStamp,
				parse : function(data){
					return data.data;
				}
			});
			this.model.fetch({
				success : function(){
					that.renderInfo();
				},
				error : function(){
					util.hideLoading();
					alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
				}
			});
		},
		renderInfo : function(){
			webtoonModel = this.model;
			var cSubTemp = _.template(jQuery('#cSubTemp').html());
			jQuery('#cSub').html(cSubTemp(this.model.toJSON()));
			EpisodeListView = new episodeListView();
			this.renderWeek();
			this.renderInfoBar();
			var isSpecial = false

			if(this.model.get('webtoon').webtoonType == 'campaign'){
                isSpecial = true;
			};

			if(isSpecial){ //캠페인웹툰의 경우 추천작품, 기존독자의견 없음
				jQuery('.cont_recommend').hide();
				jQuery('#episodeList').css({'padding-bottom':40});
			} else {
				new otherProductView();
			};
			if(this.model.get('webtoonRelatedProducts').length > 0){
				new webtoonPromotionView();
			};
			new mainView();

			this.renderTitle();
            this.renderInterval();
		},
		reRender : function(){
			var that = this;
			this.model.fetch({
				success : function(data){
					var cSubTemp = _.template(jQuery('#cSubTemp').html());
					jQuery('#cSub').html(cSubTemp(data.toJSON()));
					that.renderTitle();
					that.renderSns();
					that.renderInterval();
				},
				error : function(){
					util.hideLoading();
					alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
				}
			});
		},
		renderTitle : function(){
			if(jQuery('.tit_product').text().length>20){
				jQuery('.product_info .desc_product').addClass('max_letter');
			} else if(jQuery('.tit_product').height()>60){
				jQuery('.product_info .desc_product').addClass('two_row');
			};
		},
		renderWeek : function(){
			this.isGidamoo = false;
			this.hasTicket = false;

            this.ticketUserData = this.model.get('ticketUserData');
		    if(this.model.get('webtoon').gidamoo && this.model.get('webtoon').gidamoo.webtoonId){
		        this.isGidamoo = true;
		        this.gidamooData = this.model.get('webtoon').gidamoo;
		        this.gidamooTemp = _.template(jQuery('#gidamooTemp').html());
			};
            if(this.ticketUserData && this.ticketUserData.available && this.ticketUserData.ticketCount) {
                this.hasTicket = true;
                this.ticketTemp = _.template(jQuery('#ticketTemp').html());
            };

		    if(this.isGidamoo) {
		        jQuery('.tit_update').html(this.gidamooTemp({
		            item : this.gidamooData,
					ticketUserData : this.ticketUserData
				})).show();
            } else if(this.hasTicket) {
                jQuery('.tit_update').html(this.ticketTemp({
                    ticketUserData : this.ticketUserData
                }));
                this.renderDayText();
            } else {
                this.renderDayText();
			};

			this.renderSns();
		},
        renderDayText : function(){
		    var el = this.hasTicket ? jQuery('.tit_update .txt_update_day') : jQuery('.tit_update');

            if(this.model.get('webtoon').finishYn=='Y'){
                el.html('완결');
            } else if(this.model.get('webtoon').finishYn=='A'){
                el.html('시즌완결');
            } else if(this.model.get('webtoon').weekTerm == 'biweekly'){
                el.html('미완결');
            } else {
                el.html('매주 <em class="emph_day"></em> 연재');
                var days = {mon:'월',tue:'화',wed:'수',thu:'목',fri:'금',sat:'토',sun:'일'}
                var weeks = this.model.get('webtoon').webtoonWeeks;
                var week = '';
                _.each(weeks, function(item){
                    if(_.last(weeks) == item){
                        week += days[item.weekDay]+'요일'
                    } else {
                        week += days[item.weekDay]+'요일/'
                    };
                });
                el.find('.emph_day').html(week);
            };
            jQuery('.tit_update').show();
		},
		renderInfoBar : function(){
			var size = _.countBy(webtoonModel.get('webtoon').webtoonEpisodes, function(model){
				if(model.serviceType=='pay'){
					return 'pay';
				} else if(model.serviceType=='preview'){
					return 'preview';
				};
			});

			if(size.preview>0){
				jQuery('.prod_info').show();
				jQuery('.el_preview').removeClass('el_preview');
				jQuery('#previewGuideText').show();
			} else {
				jQuery('#previewGuideText').remove();
			};

			if(size.pay>0){
				jQuery('.prod_info').show();
				jQuery('#payGuideText').show();
			} else {
				jQuery('#payGuideText').remove();
			};

			if(size.pay>=25){
				jQuery('.prod_info').show();
				jQuery('#allBuyBtn').show();
			} else {
				jQuery('#allBuyBtn').remove();
			};

			if(jQuery('#episodeList').hasClass('mode_choice')){
				jQuery('#allBuyBtn').hide();
				jQuery('.prod_info .desc_guide').hide();
				jQuery('#payDescGuide').show();
			};

		    if(this.isGidamoo){
                jQuery('.prod_info').show();
                jQuery('.prod_info .info_prod').html('<span class="desc_guide"><span class="ico_dot"></span><span class="txt_guide">기다리면무료</span></span>');
		        this.renderNotice();
		        return;
			};

			if(webtoonModel.get('webtoon').webtoonType == 'remaster'){
				var weekSize = webtoonModel.get('webtoon').webtoonWeeks.length;
				jQuery('.el_preview.txt_update').text('유료인 완결 상품이 한 회 씩 무료로 재연재 됩니다.');
				jQuery('.el_preview').removeClass('el_preview');
				jQuery('#intervalGuideText .num_count').text(isNaN(weekSize)?1:weekSize);
				jQuery('#intervalGuideText').show();
			} else {
				jQuery('#intervalGuideText').remove();
			};

			this.renderNotice();
        },
        renderNotice : function(){
            if(webtoonModel.get('webtoon').webtoonNotice){
                var temp = _.template(jQuery('#noticeTitleTemp').html());
                if(jQuery('.prod_info').is(':visible')){
                    jQuery('#noticeTitle').remove();
                    jQuery('.prod_info .info_prod').css('margin',0).html(temp({
                        item : webtoonModel.get('webtoon').webtoonNotice,
						isGidamoo : (webtoonModel.get('webtoon').gidamoo && webtoonModel.get('webtoon').gidamoo.id)
                    }))
				} else {
                    jQuery('#noticeTitle').show().html(temp({
                        item : webtoonModel.get('webtoon').webtoonNotice,
                        isGidamoo : (webtoonModel.get('webtoon').gidamoo && webtoonModel.get('webtoon').gidamoo.id)
                    }));
				};
			} else {
                jQuery('#noticeTitle').remove();
			};
		},
		renderSns : function(){
			//set Open Graph Protocol
			var toon = this.model.get('webtoon');
			var og = {
				title : toon.title + ' 작품홈 | Daum 웹툰',
				image : toon.thumbnailImage2.url,
				desc : this.model.get('webtoon').introduction,
				name : 'Daum 웹툰',
				url : 'http://webtoon.daum.net/link/view/' + toon.nickname
			};
			var ogEl = {
				title : '#ogTit',
				image : '#ogImg',
				desc : '#ogDesc',
				name : '#ogName',
				url : '#ogUrl'
			};

			//Social Share
		    var iconEl = document.getElementById('socialShareContainer');
		    new socialshare(iconEl, {
		        shareType: 'icon',
		        link: og.url,
		        prefix: og.title,
		        useBigIcon: true,
		        callback: function (data) {
                    jQuery('.box_share').removeClass('open_share');
		        }
		    });
			var classNames = ['btn_story','btn_tw','btn_fb'];
			jQuery('.frame_sns .link_sns').addClass('btn_comm').each(function(i){
				jQuery(this).addClass(classNames[i]);
			});
		},
		renderTiara : function(){
			var age = '';

			
			webtoon.click2({
				contentType: 'webtoon',
				contentId: '1525',
                userId : '',
				age: age,
				gender: ''
			});
		},
		renderInterval : function(){
			//첫화보기 / 이어보기 링크 처리
            var that = this;
			var minEpisode = _.min(_.pluck(webtoonModel.get('webtoon').webtoonEpisodes, 'episode'));
			var firstEpisode = _.find(webtoonModel.get('webtoon').webtoonEpisodes, {episode:minEpisode});

			if(this.intervalBtnText){
                jQuery('#intervalLink').text(this.intervalBtnText).show();
			};

			jQuery('#saveViewerFrame').attr('src', '/webtoon/save_viewer');
			jQuery('#saveViewerFrame').load(function(){
				var lastEpisode = jQuery('#saveViewerFrame')[0].contentWindow.webtoonStorage.getItem(webtoonModel.get('webtoon').nickname);
				if(lastEpisode){
					var episode = _.find(webtoonModel.get('webtoon').webtoonEpisodes, {id:parseInt(lastEpisode)});
					that.intervalBtnText = '이어보기 '+episode.title;
					jQuery('#intervalLink').text(that.intervalBtnText).attr('href', '/webtoon/viewer/' + episode.id).show().addClass('#title #continuous_bt ?c_id=' + episode.id);
				} else if(firstEpisode) {
                    that.intervalBtnText = '첫화보기';
                    jQuery('#intervalLink').text(that.intervalBtnText).attr('href', '/webtoon/viewer/' + firstEpisode.id).show().addClass('#title #initial_bt ?c_id=' + firstEpisode.id);
				};
			});

		},
		events : {
			'click' : function(){
				jQuery('.box_share').removeClass('open_share');
				jQuery('.email_layer').hide();
			},
			'click .btn_grade' : function(){
				var that = this;
				util.isLogin(function(isLogin){
					if(isLogin){
						that.openScoreBox();
						that.startMove = true;
					} else {
						if(confirm('로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?')){
							location.href = 'https://logins.daum.net/accounts/loginform.do?daumauth=1&url='+encodeURIComponent(location.href);
						};
					};
				});

			},
			'mousemove .vote_star' : function(e){
				this.selectScore(e);
			},
			'mouseup .layer_regist' : function(e){
				e.stopPropagation();
				if(this.startMove){
					this.startMove = false;
					this.isZero = false;
					this.setScore();
				};
			},
			'mouseup .product_info' : function(){
				this.setZero();
			},
			'click .layer_share' : function(e){
				e.stopPropagation();
			},
			'click .list_append .btn_share' : function(e){
				e.stopPropagation();
				jQuery('.email_layer').hide();
				jQuery('.box_share').toggleClass('open_share');
			},
			'click .inner_share .btn_close' : function(){
				jQuery('.box_share').removeClass('open_share');
			},
			'click .item_profile .btn_next' : function(e){
				jQuery('.panel_profile .inner_profile').animate({left:-114})
				jQuery(e.currentTarget).hide();
				jQuery('.item_profile .btn_prev').show();
			},
			'click .item_profile .btn_prev' : function(e){
				jQuery('.panel_profile .inner_profile').animate({left:0})
				jQuery(e.currentTarget).hide();
				jQuery('.item_profile .btn_next').show();
			},
			'click .link_message' : function(e){
				e.preventDefault();
				util.autolink(jQuery('.layer_message .txt_message'));
				jQuery('.product_intro .writer_info').addClass('open_message');
			},
			'click .layer_message .btn_close' : function(e){
				e.preventDefault();
				jQuery('.product_intro .writer_info').removeClass('open_message');
			},
			'click .inner_message .link_edit' : function(e){
				e.preventDefault();
				var artistComment = this.model.get('artistComment');
				if(artistComment){
					jQuery('.edit_article .desc_guide').hide();
					jQuery('#writerTitle').val(util.unescapeHTML(artistComment.title));
					jQuery('#writerContent').val(util.unescapeHTML(artistComment.content));
				};
				jQuery('.edit_article').show();
			},
			'click .layer_edit .btn_close' : function(e){
				e.preventDefault();
				jQuery('.edit_article').hide();
			},
			'click #artistCommentForm .btn_delete' : function(e){
				var nickname = this.model.get('webtoon').nickname;
				if(confirm('작가의 말을 삭제하시겠습니까?\n(삭제 이후 복구할 수 없습니다.)')){
					jQuery.ajax({
						url : '/data/pc/webtoon/remove_artist_comment',
						method : 'POST',
						data : {
							nickname : nickname
						},
						success : function(data){
							if(data.data == 'success'){
								alert('삭제되었습니다.')
								location.reload();
							} else {
								alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
							};
						}
					});
				};
			},
			'submit #artistCommentForm' : function(e){
				e.preventDefault();
				var nickname = this.model.get('webtoon').nickname;
				var title = jQuery('#writerTitle').val();
				var content = jQuery('#writerContent').val();
				if(title==''){
					alert('제목을 입력해주세요.');
					return;
				} else if(content==''){
					alert('내용을 입력해주세요.');
					return;
				} else if(content.length>200){
					alert('200자 이내로 입력해주세요.');
					return;
				};
				if(confirm('수정 하시겠습니까?')){
					jQuery.ajax({
						url : '/data/pc/webtoon/create_artist_comment',
						method : 'POST',
						data : {
							nickname : nickname,
							title : title,
							content : content
						},
						success : function(data){
							if(data.result.status=='200'){
								alert('수정되었습니다.')
								location.reload();
							} else {
								alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
							};
						}
					});
				};
			},
			'focus .layer_edit .inp_edit' : function(e){
				jQuery(e.currentTarget).closest('.item_writer').find('.desc_guide').addClass('screen_out');
			},
			'click .box_like .btn_like' : function(e){
				//찜 등록/해제
				var that = this;
				if(this.model.get('cabinetId') && !jQuery('.box_like').hasClass('like_completed')){
					util.removeCabinet(this.model.get('cabinetId'), 'cabinet', function(result){
						var result = result.result;
						if(result.status == 200){
							jQuery(e.currentTarget).removeClass('on');
							jQuery('.layer_like .txt_complete').text('찜이 해제되었습니다.');
							jQuery('.box_like').addClass('like_completed');
							that.setTime = setTimeout(function(){
								jQuery('.layer_like').animate({opacity:0}, 300, function(){
									that.reRender();
								})
							}, 1500);
						} else {
							alert(result.message);
							that.reRender();
						};
					});
				} else if(!jQuery('.box_like').hasClass('like_completed')) {
					util.addCabinet(this.model.get('webtoon').id, function(result){
						if(result.status == 200){
							jQuery(e.currentTarget).addClass('on');
							jQuery('.layer_like .txt_complete').text('찜이 MY에 등록되었습니다.');
						} else if(result.status == 100){
							jQuery('.layer_like .txt_complete').text('로그인 후 이용해주세요.');
							if(confirm('로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?')){
								location.href = 'https://logins.daum.net/accounts/loginform.do?daumauth=1&url='+encodeURIComponent(location.href);
							};
						} else if(result.status == 300){
							jQuery(e.currentTarget).addClass('on');
							jQuery('.layer_like .txt_complete').text('이미 찜한 작품입니다.');
						};
						jQuery('.box_like').addClass('like_completed');
						that.setTime = setTimeout(function(){
							jQuery('.layer_like').animate({opacity:0}, 300, function(){
								that.reRender();
							})
						}, 1500);
					});
				};
			},
			'click a.link_mail' : function(e){
				e.stopPropagation();
				e.preventDefault();
				var mail = jQuery(e.currentTarget).data('mail');
				jQuery('.email_layer').show().find('.desc_email').text(' '+mail);
			},
			'click .email_layer' : function(e){
				e.stopPropagation();
			},
			'click .email_layer .btn_close' : function(){
				jQuery('.email_layer').hide();
			}
		},
		openScoreBox : function(){
			jQuery('.desc_product .list_append').addClass('open_regist');
		},
		//평점 관련 함수들
		selectScore : function(e){
			if(this.startMove){
				var wrapOffset = jQuery(e.currentTarget).offset().left;
				var position = e.pageX - wrapOffset;
				var percent = parseInt(position*100/134);
				percent = Math.round(percent/10)*10;
				jQuery('.inner_star').width(percent+'%');
				jQuery('.box_grade .num_grade').text(percent/10+'.0');
			};
		},
		setZero : function(){
			this.isZero = true;
			this.startMove = false;
			jQuery('.inner_star').width('0%');
			jQuery('.box_grade .num_grade').text('0.0');
			jQuery('.desc_product .list_append').removeClass('open_regist');
		},
		setScore : function(){
			var that = this;
			this.startMove = false;
			var score = parseInt(jQuery('.box_grade .num_grade').text());

			if(this.setTime){
				clearTimeout(this.setTime);
			};
			if(score>0){
				util.doVote(this.model.get('webtoon').id, 4, score, '', function(result){
					var msg = '';
					if(result.status == -1){
						msg = '수정된 점수가 반영되었습니다.';
					} else if(result == 'login'){
						msg = '로그인 후 이용해주세요.';
					} else if(result.status == 0){
						msg = '평점이 등록되었습니다.';
					} else {
						that.setZero();
						return;
					};
					jQuery('.layer_vote').css({opacity:1}).find('.txt_complete').text(msg);
					jQuery('.desc_product .list_append').addClass('vote_completed');
					that.setTimeout = setTimeout(function(){
						jQuery('.layer_vote').animate({opacity:0}, 300, function(){
							jQuery('.list_append').removeClass('vote_completed');
						});
						if(!that.isZero){
							that.setZero();
						};
					}, 1500)
				});
			} else {
				this.startMove = true;
			};
		}
	});
	var WebtoonInfoView = new webtoonInfoView();

	//회차 리스트
	var episodeItemView = Backbone.View.extend({
		tagName : 'li',
		render : function(){
			this.isPay = false;
			this.isPreview = false;
			if(this.model.get('serviceType')=='preview'){
				this.isPreview = true;
			};
			if((this.isPreview || this.model.get('serviceType')=='pay') && this.model.get('price')>0){
				this.isPay = true;
			};

			if(this.isPreview){
				jQuery(this.el).addClass('item_preview');
				if(this.model.get('isPaid')){
					jQuery(this.el).addClass('pay_done');
				};
			} else if(this.model.get('isInterval')){
				jQuery(this.el).addClass('item_free');
			};
			this.template = _.template(jQuery('#episodeListTemp').html());
			jQuery(this.el).html(this.template(this.model.toJSON()));

			if(jQuery('#episodeList').hasClass('mode_choice')) {
				this.renderChoiceMode();
			};

			return this;
		},
		renderChoiceMode : function() {
			if (this.model.get('isPaid')) {
				jQuery(this.el).addClass('item_disable item_classify');
			} else if (this.model.get('isInterval')) {
				jQuery(this.el).addClass('item_disable');
			} else {
				jQuery(this.el).addClass('item_disable');
				if (this.isPay) {
					jQuery(this.el).removeClass('item_disable');
				};
			};

			if (_.indexOf(choicedList, this.model.get('id')) > -1) {
				jQuery(this.el).addClass('choice_on');
			};
		}
	});

	var episodeListView = Backbone.View.extend({
		el : '#episodeList',
		initialize : function(opt){
			if(this.opt && this.opt.pageNo==opt.pageNo && this.opt.sort==opt.sort && this.opt.type==opt.type){
				return;
			};

			util.hideLoading();
			util.showLoading();

			//리스트 옵션설정
			var sortType = webtoonModel.get('webtoon').sort;
			var defaultOpt = {
				pageNo : 1,
				sort : sortType,
				type : ''
			};
			//hash
			var hashObj = {};
			if(location.hash!=''){
				var hashArr = location.hash.replace('#','').split('&');
				_.each(hashArr, function(item){
					hashObj[item.split('=')[0]] = item.split('=')[1];
				});
			};

			opt = opt || {};
			this.opt = _.extend(defaultOpt, hashObj);
			_.extend(this.opt, opt);

			if(!(this.opt.pageNo==1 && this.opt.sort==sortType && location.hash=='')){
				location.hash = decodeURIComponent(jQuery.param(this.opt));
			};

			var episodeModel;
            this.isAgreeGidamooPay = false;
			this.collection = new webtoon.collection();
			this.pageSize = this.opt.type=='scroll'? ALL_PAGE_SIZE:PAGE_SIZE;
			this.payEpisodeSize = 0;

			_.each(_.sortBy(webtoonModel.get('webtoon').webtoonEpisodes, 'episode').reverse(), function(item){
				episodeModel = new webtoon.model(item);
				this.collection.push(episodeModel);
				if(item.serviceType=='pay'){
					this.payEpisodeSize++;
				};
			}, this);

			webtoonModel.get('webtoon').payEpisodeSize = this.payEpisodeSize;

			//재연재 무료 에피소드
			if(webtoonModel.get('webtoon').webtoonType == 'remaster' && this.payEpisodeSize>0){
				episodeModel = new webtoon.model(webtoonModel.get('webtoon').latestWebtoonEpisode);
				episodeModel.set('id', 'interval_' + episodeModel.get('id'));
				episodeModel.set('isInterval', true);
				if(this.opt.sort == 'asc'){
					this.collection.push(episodeModel);
				} else {
					this.collection.unshift(episodeModel);
				};
			};

			this.collection.pageInfo = {
				totalItemCount : this.collection.length,
				pageCount : Math.ceil(this.collection.length/this.pageSize),
				firstPage : Math.ceil((this.opt.pageNo-5)/5)*5+1,
				nowPage : this.opt.pageNo
			};

			this.render();
			return this;
		},
		render : function(){
			jQuery('#episodeList .list_update').empty();

			var pageRange = {
				firstEpisode : (this.opt.pageNo-1) * this.pageSize,
				lastEpisode : (this.opt.pageNo * this.pageSize)-1
			};

			jQuery('.item_radio').removeClass('on');
			jQuery('.inp_radio').prop('checked', false);
			if(this.opt.sort == 'asc'){
				this.collection.models.reverse();
				jQuery('#sortOld').prop('checked', true).closest('.item_radio').addClass('on');
			} else {
				jQuery('#sortRecent').prop('checked', true).closest('.item_radio').addClass('on');
			};

			//새로고침 했을때 선택 상품 기억
			if(episodeStorage && episodeStorage.getItem('episodes_1525') && window.performance && window.performance.navigation.type==1){
				choicedList = [];
				var episodes = episodeStorage.getItem('episodes_1525').split(',');
				_.each(episodes, function(id){
					choicedList.push(parseInt(id,10));
				});
				this.renderPayMode();
			};

			this.collection.each(function(model,index){
				if(index>=pageRange.firstEpisode && index<=pageRange.lastEpisode){
					var itemView;
					itemView = new episodeItemView({
						model : model,
						className : ''
					});
					jQuery('#episodeList .list_update').append(itemView.render().el);
				};
			}, this);

			this.renderPage();
			util.hideLoading();
			return this;
		},
		renderPage : function(){
			if(this.opt.type=='scroll'){
				jQuery('#episodeList .paging_number').hide();
				this.renderPayMode();
			} else {
				jQuery('#episodeList .paging_number').show();
				this.renderNormalMode();
			};

			var pagingTemp = _.template(jQuery('#pagingTemp').html());
			var data = {
				allCount : this.collection.length,
				firstPage : Math.ceil((this.opt.pageNo-5)/5)*5+1,
				pageCount : Math.ceil(this.collection.length/this.pageSize),
				nowPage : this.opt.pageNo
			};
			jQuery('#episodeList .paging_number').html(pagingTemp(data));
		},
		renderNormalMode : function(){
			this.lastOpt = this.opt;
			this.renderPayBtn();
		},
		renderPayMode : function(){
			jQuery('#episodeList').addClass('mode_choice');
			this.renderPayList();
		},
		renderPayList : function(){
			jQuery('#episodeList .list_update li').addClass('item_disable');
			jQuery('#episodeList .link_pay_wt').closest('li').removeClass('item_disable');
			jQuery('#episodeList .link_paid').closest('li').addClass('item_classify');
			this.renderPayBar();
		},
		renderAllPayMode : function(){
			location.hash = jQuery.param({pageNo:1,sort:this.opt.sort,type:'scroll'});
			this.initialize({
				pageNo : 1,
				sort : this.opt.sort,
				type : 'scroll'
			}, true)

			this.allChoice();
		},
		allChoice : function(){
			jQuery('#episodeList .list_update li:not(".item_disable")').addClass('choice_on');

			choicedList = [];
			_.each(jQuery('#episodeList .choice_on .link_pay_wt'), function(el){
				var id = jQuery(el).data('id');
				choicedList.push(id);
			});
			setEpisodeStorage();

			this.renderPayScroll();
			this.renderPayBtn();
			this.renderPayBar();
		},
		renderPayScroll : function(){
			var target = jQuery('#episodeList .choice_on').eq(0);
			if(target.length==0){
				target = jQuery('#episodeList .list_update li:not(".item_disable")').eq(0);
			};

			jQuery(window).scrollTop(target.offset().top - 110);
		},
		renderPayBar : function(){
			PayBarView.render();
			this.renderPayBtn();
			jQuery('.info_prod .desc_guide').hide();
			jQuery('#payDescGuide').show();
			this.isPayBar = true;
		},
		renderPayBtn : function(option){
			//reset
			jQuery('#allBuyBtn').hide();
			jQuery('#allChoiceBtn').hide();
			jQuery('#choiceCancelBtn').hide();

			if(jQuery('#episodeList').hasClass('mode_choice')){
				this.paySize = this.paySize || _.countBy(this.collection.models, function(model){
					return (model.price>0 && model.isPaid==false) ? 'pay' : 'free';
				});

				if(choicedList.length == this.paySize.pay){
                    jQuery('#choiceCancelBtn').show();
				} else {
					jQuery('#allChoiceBtn').show();
				};
			} else {
				jQuery('#allBuyBtn').show();
			};
		},
		goTop : function(){
			var position = jQuery('#cMain').position().top - 90;
			if(jQuery(window).scrollTop()>440){
				jQuery(window).scrollTop(position);
			};
		},
		goLogin : function(){
			if (confirm('로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?')) {
				location.href = 'https://logins.daum.net/accounts/loginform.do?daumauth=1&url=' + encodeURIComponent(location.href);
			} else {
			    util.hideLoading();
			};
		},
		checkAgree : function(callback){
		    this.isLoading = false;
            if(!isAgree){
                jQuery.ajax({
                    url: '/data/my/pay_agreement?' + timeStamp,
                    success: function (data) {
                        if (data.data) {
                            isAgree = true;
                            callback();
                        } else {
                            var agreeTemp = _.template(jQuery('#payAgreeAreaTemp').html());
                            jQuery('#payAgreeArea').html(agreeTemp).show();
                            jQuery('.layer_pay_agree').show();
							// jQuery(window).scrollTop(jQuery('#episodeList .list_update').offset().top - 111);
							util.hideLoading();
                        };
                    }
                });
            } else {
                callback();
            };
		},
        setList : function(el){
			if(!el.closest('li').hasClass('item_disable')){
				el.closest('li').toggleClass('choice_on');
			};

			if(el.closest('li').hasClass('choice_on')){
				choicedList.push(el.data('id'));
			} else {
				choicedList = _.without(choicedList, el.data('id'));
			};

			choicedList = _.union(choicedList);
			setEpisodeStorage();

			if(choicedList.length>0){
				this.renderPayMode();
			} else {
				PayBarView.close();
			};
			util.hideLoading();
		},
        openGidamooPopup : function(html){
            jQuery('.popup_gidamoo_pay .layer_body').html(html);
		    jQuery('.popup_gidamoo_pay').show();
            jQuery('body').css({
                overflow:'hidden'
            });
		},
		closeGidamooPopup : function(){
            jQuery('.popup_gidamoo_pay').hide();
            jQuery('body').css({
                overflow:''
            });
		},
        useGidamooCoupon : function(id){
            jQuery.ajax({
                url : '/data/pc/webtoon/use_ticket?webtoon_episode_id=' + id,
                method : 'POST',
                async : false,
                success : function(data){
                    var status = data.data.status;
                    if(status=='SUCCESS'){
                        location.href = '/webtoon/viewer/' + id;
                    } else {
                        alert(data.data.message);
                    };
                    util.hideLoading();
                },
                error : function(){
                    alert('이용권을 사용하는 도중 에러가 발생했습니다. 새로고침 후 다시 시도 해주세요.');
                    util.hideLoading();
                }
            });
		},
		events : {
			'click .inner_pages a.btn_next' : function(e){
				e.preventDefault();
				this.goTop();
				this.pageNo = Math.ceil((this.opt.pageNo-5)/5)*5+6;
				this.initialize({pageNo : this.pageNo});
			},
			'click .inner_pages a.btn_prev' : function(e){
				e.preventDefault();
				this.goTop();
				this.pageNo = Math.ceil((this.opt.pageNo-5)/5)*5-4;
				this.initialize({pageNo : this.pageNo});
			},
			'click .inner_pages a.link_page' : function(e){
				e.preventDefault();
				this.goTop();
				var nowPage = jQuery(e.currentTarget).data('page');
				this.initialize({pageNo : nowPage}, true);
			},
			'click .item_radio .inp_radio' : function(e){
				if(jQuery(e.currentTarget).attr('id') == 'sortRecent'){
					if(this.opt.sort!='desc'){
						location.hash = jQuery.param({pageNo:1,sort:'desc'});
						this.initialize({
							pageNo : 1,
							sort : 'desc'
						}, true)
					};
				} else {
					if(this.opt.sort!='asc'){
						this.initialize({
							pageNo : 1,
							sort : 'asc'
						}, true)
					};
				}
			},
			'click .list_update .btn_more' : function(e){
				e.preventDefault();
				if(jQuery(e.currentTarget).closest('li').hasClass('open_more')){
					this.closeMoreList(e);
				} else {
					this.openMoreList(e);
				}
			},
			'click .list_update .btn_ahead' : function(e){
				e.preventDefault();
				if(jQuery(e.currentTarget).closest('li').hasClass('open_more')){
					this.closeMoreList(e);
				} else {
					this.openMoreList(e);
				};
			},
			'click .layer_more .btn_close' : function(){
				this.closeMoreList();
			},
			'click .layer_more button.btn_next' : function(e){
				this.subPage++;
				var parentDiv = jQuery(e.currentTarget).closest('.layer_more');
				var subPageCount = Math.ceil(parentDiv.find('.list_series li').length/10);
				this.goSubPage('next', this.subPage, subPageCount);
			},
			'click .layer_more button.btn_prev' : function(e){
				this.subPage--;
				var parentDiv = jQuery(e.currentTarget).closest('.layer_more');
				var subPageCount = Math.ceil(parentDiv.find('.list_series li').length/10);
				this.goSubPage('prev', this.subPage, subPageCount);
			},
			'click .item_disable .link_wt' : function(e){
				e.preventDefault();
			},
			'click #choiceCancelBtn' : function(){
				PayBarView.close();
			},
			'click #allChoiceBtn' : function(){
				this.renderAllPayMode();
			},
			'click .link_pay_wt' : function(e){
				e.preventDefault();
				if(this.isLoading){
				    return;
				} else {
				    this.isLoading = true;
				};

				var that = this;
				var el = jQuery(e.currentTarget);
				var isGidamooEpisode = el.closest('li').hasClass('item_preview');
                util.showLoading();

				var callback = function(){
					if((WebtoonInfoView.hasTicket || WebtoonInfoView.isGidamoo) && !that.isPayBar && WebtoonInfoView.ticketUserData.available && WebtoonInfoView.ticketUserData.ticketCount){
					    //기다무
						jQuery.ajax({
							url : '/data/pc/webtoon/ticket?webtoon_episode_id=' + el.data('id'),
							success : function(data){
								var status = data.data.status;
								if(status=='AVAILABLE'){
								    util.hideLoading();
                                    that.gidamooStatus = status;
                                    that.gidamooTargetEl = el;
                                    that.openGidamooPopup('무료 이용권으로 감상 가능합니다.<br>사용하시겠습니까?');
                                } else if(status=='INVALID_CONTENT' && !WebtoonInfoView.isGidamoo && isGidamooEpisode) {
                                    util.hideLoading();
                                    that.gidamooStatus = status;
                                    that.gidamooTargetEl = el;
                                    that.openGidamooPopup('미리보기 회차는 이용권으로 볼 수 없습니다.<br>결제 후 감상하시겠습니까?');
								} else if(status=='INVALID_CONTENT' && WebtoonInfoView.isGidamoo && !WebtoonInfoView.model.get('webtoon').gidamoo.ended && WebtoonInfoView.ticketUserData.gidamooNextAvailable) {
                                    util.hideLoading();
                                    that.gidamooStatus = status;
                                    that.gidamooTargetEl = el;
								    that.openGidamooPopup('선택한 회차는 제공사 요청에 의해<br>이용권으로 볼 수 없습니다.<br>결제 후 감상하시겠습니까?');
                                } else if(status=='INVALID_CONTENT' && !WebtoonInfoView.isGidamoo) {
                                    util.hideLoading();
                                    that.gidamooStatus = status;
                                    that.gidamooTargetEl = el;
                                    that.openGidamooPopup('선택한 회차는 제공사 요청에 의해<br>이용권으로 볼 수 없습니다.<br>결제 후 감상하시겠습니까?');
                                } else if(status=='NOT_IDENTIFIED'){
								    util.hideLoading();
                                    that.gidamooStatus = status;
                                    that.openGidamooPopup('무료 이용권 사용에는<br>실명확인이 필요합니다.<br>진행하시겠습니까?');
								} else {
                                    that.setList(el);
								};
                                that.isLoading = false;
							},
							error : function(){
								alert('상품 정보를 읽어오는데 에러가 발생했습니다. 새로고침 후 다시 시도 해주세요.');
								util.hideLoading();
                                that.isLoading = false;
							}
						});
                    } else {
                        that.isLoading = false;
					    that.setList(el);
					};
                };

				if(!isLogin) {
                    this.isLoading = false;
					util.isLogin(function(isLoginStatus){
						if (isLoginStatus) {
							isLogin = true;
							that.checkAgree(callback);
						} else {
							that.goLogin();
						};
					});
				} else {
					this.checkAgree(callback);
				};
			},
			'click #allBuyBtn' : function(){
				var that = this;

				if(!isLogin){
					util.isLogin(function (isLoginStatus) {
						if (isLoginStatus) {
							isLogin = true;
							that.checkAgree(function(){
								that.renderAllPayMode();
							});
						} else {
							that.goLogin();
						};
					});
				} else {
					this.checkAgree(function(){
						that.renderAllPayMode();
					});
				};
			},
			'click #gidamooInfoBtn' : function(e){
			    e.preventDefault();
			    var temp = _.template(jQuery('#gidamooInfoTemp').html());
			    jQuery('.popup_gidamoo .inner_post_layer').html(temp({
			        item : WebtoonInfoView.gidamooData
				}));
			    jQuery('.popup_gidamoo').show();
			    jQuery('body').css({
			        overflow:'hidden'
				});
			},
            'click #ticketInfoBtn' : function(e){
                e.preventDefault();
                var temp = _.template(jQuery('#ticketInfoTemp').html());
                jQuery('.popup_gidamoo .inner_post_layer').html(temp({
                    item : WebtoonInfoView.ticketUserData
                }));
                jQuery('.popup_gidamoo').show();
                jQuery('body').css({
                    overflow:'hidden'
                });
            },
			'click .popup_gidamoo .btn_close' : function(e){
                e.preventDefault();
                jQuery('.popup_gidamoo').hide();
                jQuery('body').css({
                    overflow:'auto'
                });
			},
			'click #popupNoticeBtn' : function(e){
                e.preventDefault();
                var temp = _.template(jQuery('#noticeTemp').html());
                jQuery('.popup_gidamoo .inner_post_layer').html(temp({
                    item : webtoonModel.get('webtoon').webtoonNotice
                }));
                jQuery('.popup_gidamoo').show();
                jQuery('body').css({
                    overflow:'hidden'
                });
			},
            'click .popup_gidamoo_pay .btn_agree' : function(e){
                e.preventDefault();
                this.closeGidamooPopup();

                if(this.gidamooStatus == 'NOT_IDENTIFIED'){
                    location.href = 'https://member.daum.net/namecheck.daum?svcCode=10&rtnUrl=' + encodeURIComponent(location.href);
				} else {
                    var episodeId = this.gidamooTargetEl.data('id');

                    if(this.collection.get(episodeId).get('ticketAvailable')){
                        this.useGidamooCoupon(episodeId);
                    } else {
                        this.setList(this.gidamooTargetEl);
                    };
				};
            },
            'click .popup_gidamoo_pay .btn_close' : function(e){
                e.preventDefault();
                this.closeGidamooPopup();
            },
			'click .popup_gidamoo_pay .btn_cancel' : function(e){
                e.preventDefault();
                this.closeGidamooPopup();
			}
		},
		openMoreList : function(e){
			//유료만화 세부리스트
			this.closeMoreList();
			var targetLi = jQuery(e.currentTarget).closest('li');
			var lineClass = targetLi.attr('class');
			var positionX = targetLi.offset().left;

			jQuery('.'+lineClass).height(604);
			targetLi.addClass('open_more');
			targetLi.find('.layer_more').css({
				width : jQuery(window).width(),
				marginLeft : -positionX
			});
			var parentDiv = jQuery(e.currentTarget).closest('li');
			var subPageCount = Math.ceil(parentDiv.find('.list_series li').length/10);
			this.goSubPage('prev', this.subPage, subPageCount);
		},
		closeMoreList : function(){
			jQuery('.list_update li').height('').removeClass('open_more');
			jQuery('.list_update .layer_more li').hide();
			jQuery('.list_update .layer_more li[data-page=1]').show();
			this.subPage = 1;
		},
		goSubPage : function(type, nowPage, totalCount){
			jQuery('.layer_more li').hide();
			jQuery('.list_update .layer_more li[data-page='+nowPage+']').show();
			if(type=='next'){
				jQuery('.layer_more button.btn_prev').show();
				jQuery('.layer_more span.btn_prev').hide();
				if(nowPage == totalCount){
					jQuery('.layer_more button.btn_next').hide();
					jQuery('.layer_more span.btn_next').show();
				}
			} else {
				jQuery('.layer_more button.btn_next').show();
				jQuery('.layer_more span.btn_next').hide();
				if(nowPage == 1){
					jQuery('.layer_more button.btn_prev').hide();
					jQuery('.layer_more span.btn_prev').show();
				}
			};
		}
	});

	//관련상품
	var webtoonPromotionView = Backbone.View.extend({
		el : '#promotionContent',
		initialize : function(){
			this.model = webtoonModel;
			this.productArr = this.model.get('webtoonRelatedProducts');
			this.render();
		},
		render : function(page){
			this.page = page || 1;
			var product = {
				product : [this.productArr[this.page*2-2], this.productArr[this.page*2-1]],
				pageCount : Math.ceil(this.productArr.length/2),
				page : this.page
			};
			if(_.isUndefined(product.product[1])){
				product.product.length = 1;
			};
			this.template = _.template(jQuery('#promotionContentTemp').html());
			this.$el.html(this.template(product));
			return this;
		},
		events : {
			'click button.num_page' : function(e){
				e.preventDefault();
				this.render(jQuery(e.currentTarget).data('page'));
			},
			'click button.btn_next' : function(e){
				e.preventDefault();
				this.render(this.page+=1);
			},
			'click button.btn_prev' : function(e){
				e.preventDefault();
				this.render(this.page-=1);
			}
		}
	});

	//작가의 다른작품, 없을경우 추천작품
	var otherProductView = Backbone.View.extend({
		el : '#otherProduct',
		initialize : function(){
			this.model = webtoonModel;
			this.data = {
				anotherWebtoonType : this.model.get('anotherWebtoonType'),
				data : this.model.get('anotherWebtoons')
			}
			this.render();
		},
		render : function(){
			if(this.data.anotherWebtoonType=='artist' || this.data.anotherWebtoonType=='recommend'){
				this.template = _.template(jQuery('#otherProductTemp').html());
				this.$el.html(this.template(this.data));
				this.pageCount = Math.ceil(this.model.get('anotherWebtoons').length/4);
				this.page = 1;
			};
			return this;
		},
		move : true,
		events : {
			'click .btn_next' : function(){
				if(this.page < this.pageCount){
					this.page++;
					jQuery('.slide_other .list_other').animate({'left':'-=676px'});
					jQuery('.other_product span.btn_prev').hide();
					jQuery('.other_product button.btn_prev').show();
					if(this.page == this.pageCount){
						jQuery('.other_product span.btn_next').show();
						jQuery('.other_product button.btn_next').hide();
					} else {
						jQuery('.other_product span.btn_next').hide();
						jQuery('.other_product button.btn_next').show();
					}
				};
			},
			'click .btn_prev' : function(){
				if(this.page > 1){
					this.page--;
					jQuery('.slide_other .list_other').animate({'left':'+=676px'});
					jQuery('.other_product span.btn_next').hide();
					jQuery('.other_product button.btn_next').show();
					if(this.page == 1){
						jQuery('.other_product span.btn_prev').show();
						jQuery('.other_product button.btn_prev').hide();
					} else {
						jQuery('.other_product span.btn_prev').hide();
						jQuery('.other_product button.btn_prev').show();
					}
				};
			}
		}
	});

	var payBarView = Backbone.View.extend({
		el : '#payBar',
		initialize : function(){
			var that = this;
			this.template = _.template(jQuery('#payBarTemp').html());
			return this;
		},
		render : function(){
			var that = this;
			var episodes = webtoonModel.get('webtoon').webtoonEpisodes;
			this.targetList = [];

			_.each(choicedList, function(id){
				this.targetList.push(_.find(episodes, {id:id}));
			}, this);
			this.targetList = _.union(this.targetList);

			var countByType = _.countBy(this.targetList, function(target){
				return target.serviceType;
			});
			var firstPayEpisode = _.find(episodes, {serviceType:'pay'});
			var firstPreviewEpisode = _.find(episodes, {serviceType:'preview'});

			var count = {
				preview : {
					price : firstPreviewEpisode ? firstPreviewEpisode.price : 0,
					count : countByType.preview || 0
				},
				pay : {
					price : firstPayEpisode ? firstPayEpisode.price : 0,
					count : countByType.pay || 0
				}
			};

			var callback = function(){
				jQuery('#payBar').show();
				jQuery('#payBar2').hide();

				jQuery(that.el).css({
					bottom : 0
				}).html(that.template({
					count : count,
					period : that.period,
					isCouponAvailable : webtoonModel.get('webtoon').couponAvailable
				}));
			};

			if(!this.period && choicedList.length>0){
				jQuery.ajax({
					url : '/data/order?related_content_id=' + choicedList[0] + '&content_type=webtoon&product_type=content&' + timeStamp,
					success : function(data){
						that.period = 7;
						that.cashAmount = data.data.cashAmount;
						that.couponCashAmount = data.data.couponCashAmount;
                        that.webtoonCashAmount = data.data.webtoonCashAmount;
						callback();
                    },
					error : function(){
						that.period = 7;
						callback();
					}
				});
			} else {
				callback();
			};
		},
		close : function(){
			util.hideLoading();

			jQuery(this.el).css({
				bottom : -170
			}).show();
			jQuery('#payBar2').css({
				bottom : -170
			});
			jQuery('#episodeList').removeClass('mode_choice');
			jQuery('#episodeList .list_update li').removeClass('choice_on item_disable');
			jQuery('#episodeList .list_update li').removeClass('item_classify');

			choicedList = [];
			setEpisodeStorage();

			if(EpisodeListView.opt.type == 'scroll'){
				jQuery(window).scrollTop(jQuery('#episodeList').offset().top);
			};

			EpisodeListView.initialize(EpisodeListView.lastOpt || {
                pageNo : 1,
                sort : 'desc',
                type : ''
            });

			jQuery('#allChoiceBtn').hide();
			jQuery('#choiceCancelBtn').hide();
			jQuery('#allBuyBtn').show();
			jQuery('.info_prod .desc_guide').show();
			jQuery('#payDescGuide').hide();
            EpisodeListView.isPayBar = false;
		},
		events : {
			'click #closePayBarBtn' : function(){
				this.close();
			},
			'click #payNextBtn' : function(){
				if(allPrice>0) {
					PayBarView2.getInfo();
				};
			}
		}
	});
	PayBarView = new payBarView();

	var payBarView2 = Backbone.View.extend({
		el : '#payBar2',
		initialize : function(){
			var that = this;
			this.isSubmit = false;
			this.productList = [];
			this.template = _.template(jQuery('#payBarTemp2').html());
			return this;
		},
		getInfo : function(){
			this.render();
		},
		render : function(){
			jQuery('#payBar').hide();

			jQuery(this.el).html(this.template({
				item : {
					cashAmount : PayBarView.cashAmount,
					couponCashAmount : PayBarView.couponCashAmount,
                    webtoonCashAmount : PayBarView.webtoonCashAmount
				},
                isCouponAvailable : webtoonModel.get('webtoon').couponAvailable
			}));
			jQuery(this.el).css({
				bottom : 0
			}).show();

			this.isSubmit = false;
			this.renderOpBnr();
		},
        renderOpBnr : function(){
            jQuery('#vpBnr').empty().show();
            jQuery.ajax({
                url : API.viewer.banner,
                success : function(data){
                    if(data.data && data.data.length > 0) {
                        var onItem = _.filter(data.data, function(item){
                            return item.isShow == 'on';
                        });
                        if(onItem.length>0){
                            var targetItem = _.sample(onItem);
                            jQuery('#vpBnr').append('<a href="'+targetItem.url+'" target="_blank" style="display:block;width:186px;height:140px"><img src="'+targetItem.image+'" style="display:block;width:186px;height:140px"></a>');
                        } else {
                            jQuery('#vpBnr').hide();
                        };
                    } else {
                        jQuery('#vpBnr').hide();
                    };
                },
                error : function(){
                    jQuery('#vpBnr').hide();
                }
            });
		},
        trackPurchase : function(payment){
			var ecommerce = {
				payment: payment,
				price_amt: allPrice,
				total_amt: allPrice
			};

			var ecommerceContents = [];

			_.each(this.orderData.products, function(p){
				ecommerceContents.push({
					id: p.id,
					name: p.name,
					price: p.price,
					quantity: 1,
					price_amt: p.price
				})
			});

			TiaraTracker.getInstance()
				.trackEcommerce('구매완료')
				.actionKind('Purchase')
				.ecommerce(ecommerce)
				.ecommerceContents(ecommerceContents)
				.track();
		},
		payDone : function(){
			var size = choicedList.length;
			var episodeId = choicedList[0];

			PayBarView.close();

			if(size==1){
				location.href = '/webtoon/viewer/' + episodeId ;
			} else {
				location.reload();
			};
		},
		//다음캐시 결제
		useDcash : function(){
			var that = this;
			var host = location.origin;
			jQuery.ajax({
				url : '/data/order/request_daum_cash_order?' + timeStamp,
				method : 'POST',
				traditional : true,
				data : {
					'product_id' : that.productList
				},
				success : function(data){
					//'NOT_AGREED','NO_PRODUCT','BILLING_ERROR'
					var data = data.data;
					if(data.result=='SUCCESS'){
						alert('결제가 완료되었습니다.');
						that.trackPurchase('Daum 캐시');
						that.payDone();
					} else if(data.result=='NOT_AGREED'){
						var returnUrl = encodeURIComponent(host + '/order/order_agree');
						var newWin = window.open(data.provisionUrl + '?returnUrl=' + returnUrl,'_blank','width=570,height=564,toolbar=no,scrollbars=no,resizable=no,status=no');
						if(util.isAllowPopup(newWin)){
							newWin.focus();
						} else {
							jQuery('.notice_popup').show();
						};
					} else if(data.result=='BILLING_ERROR') {
						alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
					} else if(data.result=='IS_PAID') {
						alert('이미 결제한 상품이 있습니다.');
					} else {
						alert(data.message);
					};

					that.isSubmit = false;
					util.hideLoading()
				},
				error : function(){
					alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
					that.isSubmit = false;
					util.hideLoading()
				}
			});
		},
		//웹툰캐시 결제
		useWcash : function(){
			var that = this;
			var host = location.origin;
			jQuery.ajax({
				url : '/data/order/request_coupon_cash_order?' + timeStamp,
				method : 'POST',
				traditional : true,
				data : {
					'product_id' : that.productList
				},
				success : function(data){
					if(data.data=='success'){
						alert('결제가 완료되었습니다.');
						that.trackPurchase('웹툰 캐시');
						that.payDone();
					} else if(data.data=='not_enough_coupon_cash'){
						alert('쿠폰잔액이 부족합니다.');
					} else if(data.data=='paid') {
						alert('이미 결제한 상품이 있습니다.');
					} else {
						alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
					};

					that.isSubmit = false;
					util.hideLoading()
				},
				error : function(){
					alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
					that.isSubmit = false;
					util.hideLoading()
				}
			});
		},
		//일반 결제
		order : function(){
			var that = this;
			var productList = {
				'product_id' : this.productList
			};
			productList = jQuery.param(productList, true);

			jQuery.ajax({
				url : '/data/order/request_order?' + timeStamp,
				data : productList,
				method : 'POST',
				traditional : true,
				success : function(data){
					if(data.data.productOrder.settlement.biReadyId){
                        var newWin = window.open('https://cash.daum.net/Skyline-front/Settlement/Pay.daum?rsvSeq=' + data.data.productOrder.settlement.biReadyId,'_blank','width=570,height=564,toolbar=no,scrollbars=no,resizable=no,status=no');

						if(util.isAllowPopup(newWin)){
							newWin.focus();
						} else {
							jQuery('.notice_popup').show();
						};
						setTimeout(function(){
							that.isSubmit = false;
							util.hideLoading()
						}, 1000)
					} else {
						alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
						that.isSubmit = false;
						util.hideLoading()
					};
				},
				error : function(){
					alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
					that.isSubmit = false;
					util.hideLoading()
				}
			});
		},
		events : {
			'click .btn_close' : function(){
				jQuery(this.el).css({
					bottom : -170
				});
				PayBarView.close();
			},
			'click .list_pay li' : function(e){
				var el = jQuery(e.currentTarget);

				if(!el.hasClass('disabled') && el.find('.txt_lack').length>0){
					el.find('.txt_lack').show();
					el.find('.txt_cash').hide();
                    el.find('.emph_cash').hide();

                    this.hideNotice = setTimeout(function(){
                        el.find('.txt_lack').hide();
                        el.find('.txt_cash').show();
                        el.find('.emph_cash').show();
                    }, 2000);
				};
			},
			'change .inp_radio' : function(){
				jQuery('#payBar2 .list_pay li').removeClass('select_on');
				jQuery('#payBar2 .inp_radio:checked').closest('li').addClass('select_on');

				if(jQuery('#payGeneral').is(':checked')){
					jQuery('.pay_webtoon .btn_pay .txt_direct').addClass('txt_direct2');
				} else {
					jQuery('.pay_webtoon .btn_pay .txt_direct').removeClass('txt_direct2');
				};
			},
			'click #cashChargeBtn' : function(e){
				e.preventDefault();

				var newWin = window.open('/order/charge?charge_redirect_url='+decodeURIComponent('http://webtoon.daum.net/order/charge_end'),'_blank','width=570,height=564,toolbar=no,scrollbars=no,resizable=no,status=no');
				if(util.isAllowPopup(newWin)){
					newWin.focus();
				} else {
					jQuery('.notice_popup').show();
				};
			},
			'click #payBtn' : function(){
				var that = this;

				if(this.isSubmit){
					return;
				} else {
					util.showLoading();
					this.isSubmit = true;
				};

				var callback = function(){
                    if(jQuery('#payWcash').prop('checked') && confirm('웹툰캐시로 결제 하시겠습니까?')){
    					that.useWcash();
                    } else if(jQuery('#payDcash').prop('checked') && confirm('다음캐시로 결제 하시겠습니까?')){
    					that.useDcash();
                    } else if(jQuery('#payGeneral').prop('checked')){
						that.order();
                    } else {
						util.hideLoading();
						that.isSubmit = false;
					};
				};

				jQuery.ajax({
					url : '/data/order?' + timeStamp,
					method : 'POST',
					traditional : true,
					data : {
						'related_content_id' : choicedList,
						'content_type' : 'webtoon',
						'product_type' : 'content'
					},
					success : function(data){
						if(data.data) {
							that.orderData = data.data;
							if (data.data.errorCode && !jQuery('#payWcash').prop('checked')) {
								alert("현재 결제시스템 점검 작업으로 일부 유료결제 이용이 불가능합니다.");
                                util.hideLoading();
                                that.isSubmit = false;
								return;
							};
							if (data.result.status == '200' && data.data.products && data.data.products.length > 0) {
								var productList = _.map(data.data.products, function (p) {
									return p.id
								});
								that.productList = productList;
								callback();
							} else {
								alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
								PayBarView.close();
								return;
							};
						} else {
							alert('결제가 실패하였습니다. 고객센터로 문의 바랍니다.');
							PayBarView.close();
							return;
						};
					}
				});
			}
		}
	});
	PayBarView2 = new payBarView2();

	var mainView = Backbone.View.extend({
		el : '#cMain',
		firstPage : 1,
		nowPage : 1,
		initialize : function(){
			var that = this;
		},
		renderPaging : function(){
			var temp = _.template(jQuery('#cmtPagingTemp').html());
			var data = {
				allCount : this.allCount,
				firstPage : this.firstPage,
				nowPage : this.nowPage
			};
			jQuery('#cmtPaging').html(temp(data));
		},
		events : {
			'click .layer_foot .btn_close' : function(){
				jQuery('body').removeClass('popup_on');
			},
			'click #cmtPaging a.link_page' : function(e){
				e.preventDefault();
				this.nowPage = jQuery(e.currentTarget).text();
				this.initialize();
			},
			'click #cmtPaging a.btn_next' : function(e){
				e.preventDefault();
				this.firstPage += 5;
				this.nowPage = this.firstPage;
				this.initialize();
			},
			'click #cmtPaging a.btn_prev' : function(e){
				e.preventDefault();
				this.firstPage -= 5;
				this.nowPage = this.firstPage;
				this.initialize();
			}
		}
	});

	jQuery(window).on('hashchange', function(){
		var hashObj = {};
		var hashArr = location.hash.replace('#','').split('&');
		_.each(hashArr, function(item){
			hashObj[item.split('=')[0]] = item.split('=')[1];
		});
		EpisodeListView.initialize(hashObj)
	});

	jQuery(document).keyup(function(e) {
		if(e.keyCode == 27) {
			PayBarView.close();
		};
	})
};

jQuery(document).ready(function(){
	webtoon.view("AmazingRumor");
});

//티아라
var _tiq = 'undefined' !== typeof _tiq ? _tiq : []; // Global Variables
_tiq.push(['__setSection', 'webtoon']);
_tiq.push(['__setPageName', 'view']);
_tiq.push(['__setParam', 'puid', new Date().getTime().toString()]);
_tiq.push(['__setParam', 'svcdomain', 'webtoon.daum.net']);
_tiq.push(['__clickOn']);
_tiq.push(['__trackPageview']);

var pageMeta = {
	type: 'series',
	id: '1525',
	name: "경이로운 소문",
	series : "경이로운 소문",
	series_id : '1525',
	image: 'http://t1.daumcdn.net/webtoon/op/e395983b6ff52ef89c96ecf133953a078ec15263'
};

TiaraTracker.getInstance()
	.setSection('home')
	.setPage('webtoon')
	.trackPage('웹툰홈')
	.actionKind('ViewContent')
	.pageMeta(pageMeta)
	.track();
</script>



	<!-- //daumContent -->

    	


        <div class="dimmed_layer_voucher popup_ticket" style="display:none"></div>
        <div class="voucher_layer popup_ticket" style="display:none">
            <div class="inner_voucher_layer">
                <div class="layer_head">
                    <img src="" class="img_voucher" width="316" height="166">
                    <strong class="web_font tit_voucher"></strong>
                </div>
                <div class="layer_body">
                    <p class="desc_voucher"></p>
                </div>
                <div class="layer_foot">
                    <button class="btn_btmclose">다시 보지 않기</button>
                    <a href="/my/coupon" class="link_notice">확인하기</a>
                    <button type="button" class="btn_comm btn_close">닫기</button>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            jQuery(document).ready(function(){
                jQuery('.popup_ticket .link_notice').click(function(e){
                    e.preventDefault();
                    jQuery.cookie('ONLYU_LAYER', 'true', { expires: 3, path: '/' });
                    jQuery('.popup_ticket').hide();
                    location.href = jQuery(this).attr('href');
                });

                jQuery('.popup_ticket .btn_btmclose').click(function(){
                    jQuery.cookie('ONLYU_LAYER', 'true', { expires: 3, path: '/' });
                    jQuery('.popup_ticket').hide();
                });

                jQuery('.popup_ticket .btn_close').click(function(){
                    jQuery('.popup_ticket').hide();
                });
            });
        </script>
	
	        <div id="daumFoot">
            <h2 class="screen_out">서비스 이용정보</h2>
            <div class="service_reference">
                <a href="http://webtoon.daum.net/bbs/notice/view/1527" class="btn_comm link_quest">연재 및 유통 문의</a>
                <a href="/business" class="btn_comm link_partner">사업제휴문의</a>
                <a href="http://search.daum.net/search?w=tot&amp;DA=UME&amp;t__nil_searchbox=suggest&amp;sug=&amp;sq=%EB%8B%A4%EC%9D%8C+%EC%9B%B9%ED%88%B0%EC%95%B1&amp;o=2&amp;q=%EB%8B%A4%EC%9D%8C+%EC%9B%B9%ED%88%B0%EC%95%B1" target="_blank" class="btn_comm link_appdown">앱 다운로드</a>
            </div>
            <div class="footer_link">
                <a href="http://www.daum.net/doc/info.html" target="_blank" class="link_info">서비스 약관/정책</a> <span class="ico_comm"></span>
                <a href="http://www.daum.net/doc/info_protection.html" target="_blank" class="link_info">개인정보처리방침</a> <span class="ico_comm"></span>
                <a href="https://cs.daum.net/redbell/right2013/right.html" target="_blank" class="link_info">권리침해신고</a> <span class="ico_comm"></span>
                <a href="http://cs.daum.net/faq/23.html" target="_blank" class="link_info">다음웹툰 고객센터</a> <span class="ico_comm"></span>
                <a href="/order/service_terms" class="link_info">유료서비스 약관</a>
            </div>
            <small class="info_copyright">
                Copyright &copy; <a href="http://kakaocorp.com" target="_blank" class="link_daumkakao" title="Kakao Corp. 바로가기">Kakao Corp.</a>   All rights reserved.
            </small>
        </div>
        <!-- //daumFoot -->

        
        <div id="wrapMinidaum"></div>
        <script type="text/javascript">
            var minidaum_options = {
                bgType: "dark",
                enableLogoutRetun: true,
                disableHotissue: true,
                disableTracker : true
            }
        </script>
        <script src="https://go.daum.net/minidaum_pc.daum" charset="utf-8" type="text/javascript" id="minidaumJs"></script>
	
</div>
<!-- //daumWrap -->
<div class="page_loading" style="display:none" data-id="0">페이지를 로딩중입니다.</div>

<script type="text/template" id="noticeListTemp">
<div class="inner_notice">
	<h3 class="tit_notice"><a href="/bbs/notice/" class="link_board">Notice</a></h3>
	<a href="<%= url %>" class="link_post"><%= title %></a>
	<span class="txt_date"><%= regDate %></span>
	<a href="/bbs/notice/" class="link_more"><span class="f_l">더보기</span><span class="btn_comm"></span></a>
</div>
</script>
<script type="text/template" id="botBnrTemp">
<div class="#home #bottom_bnr<%= index+1 %>">
	<a href="<%= url %>" class="link_banner" style="background-color:#<%= backgroundColor %>"
       data-tiara-layer="bot_banner"
       data-tiara-action-name="하단 배너"
       data-tiara-action-kind="ClickContent"
       data-tiara-type="banner"
       data-tiara-name="<%= title %>"
       data-tiara-image="<%= image %>"
       data-tiara-plink="<%= url %>"
       data-tiara-id="<%= index+1 %>"
    >
		<img src="<%= image %>" width="978" height="230" class="img_banner" alt="<%= title %>">
	</a>
</div>
</script>

<script src="https://t1.daumcdn.net/webtoon/cssjs/20210125101038/moment.js" type="text/javascript"></script>
<script src="https://t1.daumcdn.net/webtoon/cssjs/20210125101038/common.js" type="text/javascript"></script>
<script src="https://t1.daumcdn.net/webtoon/cssjs/20210125101038/util.js" type="text/javascript"></script>
<script type="text/javascript" charset="UTF-8" src="//t1.daumcdn.net/kas/static/ba.min.js"></script>

<script type="text/javascript">
var RecentView;
jQuery(document).ready(function(){
	var scrollPosition;
	jQuery(window).scroll(function(){
		scrollPosition = jQuery(this).scrollTop();
		if (scrollPosition > 34) {
			jQuery('#daumWrap').addClass('fixed');
			jQuery('.recent_layer').css({top : 91})
		} else {
			jQuery('#daumWrap').removeClass('fixed');
			jQuery('.recent_layer').css({top : 127-scrollPosition})
		}
	});

    	new webtoon.noticeView();
        	new webtoon.botBnrView();
    	RecentView = new webtoon.recentListView();
});
</script>
</body>
</html>






